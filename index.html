<!DOCTYPE html>
<html>
<head> 
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>5WORLD</title>
    <link rel="icon" type="image/png" href="https://res.cloudinary.com/dxgawkr4g/image/upload/v1731291319/Logo5Mon-1.png">
</head>

<body>
    <audio id="bgMusic" hidden></audio>
    <audio id="clickSound" src="https://res.cloudinary.com/dxgawkr4g/video/upload/v1745399283/byjcjqnocyzsslce8kwv.mp3" 
        preload="auto" hidden></audio>
    
    <!-- Loading Overlay -->
    <div id="loadingOverlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; color: white; text-align: center; align-items: center; justify-content: center; font-size: 24px; z-index: 1001; flex-direction: column;">
        <div class="spinner">
            <img style="display: block; width: 100%; height: auto;"
                src="https://res.cloudinary.com/dxgawkr4g/image/upload/v1731553830/Logo-5Mon-White.png" alt="ImageBag">
        </div>

    </div>

    <!-- Loading Screen Battle-->
    <div id="loadingScreen" class="loading-screen">
        <div id="leftGate" class="gate"
            style="left:0; transform: translateX(-100%); background: url('https://res.cloudinary.com/dxgawkr4g/image/upload/v1735458047/gicshtplh2vwywetjjhk.png') no-repeat center; background-size: cover;">
        </div>
        <div id="rightGate" class="gate"
            style="right:0; transform: translateX(100%); background: url('https://res.cloudinary.com/dxgawkr4g/image/upload/v1735458047/xcsprxoioaxnjklhk9hc.png') no-repeat center; background-size: cover;">
        </div>
    </div>

    <div id="ScreenBattle">
        <!-- Màn hình đăng nhập/đăng ký -->
        <div id="welcomePage" style=" 
        display: flex;
        flex-direction: row;
        align-items: stretch;
        justify-content: center;
        gap: 10px;
        margin: 60px
        ">

            <!-- Trang đăng nhập -->
            <div style="display: flex;
          flex-direction: column;
          flex-wrap: nowrap;
          align-items: center;
          padding: 30px 30px;
          gap: 10px;
          background-color: white;
          width: 250px;
          height: auto;
          justify-content: flex-start;
          border-radius: 20px;
          border: 1px solid #c5c5c5;
          margin-bottom: 35px;
          margin-top: 35px;
          box-shadow: rgb(0 0 0 / 48%) 0px 4px 15px;
        ">
                <div style="
                  height: 50px;
                  width: 260px; 
                  margin-bottom: 10px; 
                  display: flex;
                  flex-direction: row;
                  justify-content: center;
                  align-items: center;
                  gap: 0px;
                  ">
                    <img style="display: block; width: 30%; height: auto;"
                        src="https://res.cloudinary.com/dxgawkr4g/image/upload/v1731291319/Logo5Mon-1.png"
                        alt="ImageBag">
                    <strong>
                        <p style="
                  height: auto;
                  width: auto;
                  text-align: center;
                  display: none;
                  font-size: 55px;
                  margin: 0px;
                  align-items: center;
                  color: #cdbdb6;
                ">5MON</p>
                    </strong>
                </div>

                <input type="text" id="loginUsername" placeholder="Tài khoản" required value="quangvanviet" style="
                height: 28px;
                width: 250px;
                border-radius: 10px;
                border-color: #cfcfcf;
                text-align: center;
                border: 1px solid #c5c5c5;

              ">
                <input type="password" id="loginPassword" placeholder="Mật khẩu" required value="123456" style="
                height: 28px;
                width: 250px;
                border-radius: 10px;
                border-color: #cfcfcf;
                text-align: center;
                border: 1px solid #c5c5c5;
              ">
                <button
                    style="height: 35px; width: 255px; background-color: #b4b8ff; border: none; border-radius: 15px;"
                    onclick="login(false)">Đăng nhập</button>
                <div style="display: flex; flex-direction: row; align-items: center; width: 260px">
                    <hr style="border: 0.1px solid #c9c6c6; width: 180px; margin-right: 10px;">
                    <p style="color: black;"> Hoặc </p>
                    <hr style="border: 0.1px solid #c9c6c6; width: 180px; margin-left: 10px;">
                </div>
                <span id="loginMessage" style="color: red; text-align: center;"></span>
                <button
                    style="height: 35px; width: 255px; background-color: #b4b8ff; border: none; border-radius: 15px;"
                    onclick="login(true)">Chơi thử</button>
                <button
                    style="height: 35px; width: 255px; background-color: #b4b8ff; border: none; border-radius: 15px;"
                    onclick="showRegisterPage()">Đăng ký</button>
                <button
                    style="height: 35px; width: 255px; background-color: #b4b8ff; border: none; border-radius: 15px;"
                    onclick="showRegisterPage()">Quên mật khẩu</button>
                <div style="display: flex; flex-direction: row; align-items: center; width: 260px">
                    <hr style="border: 0.1px solid #c9c6c6; width: 260px; margin-right: 10px;">
                </div>
                <button
                    style="height: 35px; width: 255px; background-color: #b4b8ff; border: none; border-radius: 15px;"
                    onclick="window.open('https://script.google.com/macros/s/AKfycbzGxCifX15m9IcdvLauK3EBNZPB_eabbpJKGgLATpP_BBrfvanF-NIltcmOkdEz3aI/exec', '_blank')">
                    Liên hệ trợ giúp
                </button>
            </div>

            <!-- Trang đăng ký -->
            <div id="registerPage" style="
                display: none;
                flex-direction: column;
                flex-wrap: nowrap;
                align-items: center;
                padding: 30px 30px;
                gap: 10px;
                background-color: white;
                width: 250px;
                height: auto;
                justify-content: flex-start;
                border-radius: 20px;
                border: 1px solid #c5c5c5;
                margin-bottom: 35px;
                margin-top: 35px;
                opacity: 0;
                transition: opacity 1s;
                box-shadow: rgb(0 0 0 / 48%) 0px 4px 15px;
              ">
                <div style="
                height: 50px;
                width: 260px;
                margin-bottom: 10px;
                display: flex;
                flex-direction: row;
                justify-content: center;
                gap: 20px;
                align-items: center;
                  ">
                    <strong>
                        <p style="
                  height: 50px;
                  width: 260px;
                  text-align: center;
                  font-size: 30px;
                  margin: 0px;
                  display: flex;
                  color: #cdbdb6;
                  align-items: center;
                  justify-content: center;
                  ">Đăng ký</p>
                    </strong>
                </div>

                <input type="text" id="registerUsername" placeholder="Tài khoản" required style="
                height: 28px;
                width: 250px;
                border-radius: 10px;
                border-color: #cfcfcf;
                text-align: center;
                border: 1px solid #c5c5c5;

              ">
                <input type="password" id="registerPassword" placeholder="Mật khẩu" required style="
                height: 28px;
                width: 250px;
                border-radius: 10px;
                border-color: #cfcfcf;
                text-align: center;
                border: 1px solid #c5c5c5;
              ">
                <input type="text" id="registerName" placeholder="Họ và tên" required style="
                height: 28px;
                width: 250px;
                border-radius: 10px;
                border-color: #cfcfcf;
                text-align: center;
                border: 1px solid #c5c5c5;

              ">
                <input type="email" id="registerEmail" placeholder="Email" required style="
                height: 28px;
                width: 250px;
                border-radius: 10px;
                border-color: #cfcfcf;
                text-align: center;
                border: 1px solid #c5c5c5;

              ">
                <input type="tel" id="registerTel" placeholder="Số điện thoại" required style="
                height: 28px;
                width: 250px;
                border-radius: 10px;
                border-color: #cfcfcf;
                text-align: center;
                border: 1px solid #c5c5c5;

              ">

                <input type="text" id="registerKey" placeholder="Mã kích hoạt" required style="
                height: 28px;
                width: 250px;
                border-radius: 10px;
                border-color: #cfcfcf;
                text-align: center;
                border: 1px solid #c5c5c5;

              ">

                <button
                    style="height: 35px; width: 255px; background-color: #b4b8ff; border: none; border-radius: 15px;"
                    onclick="register()">Đăng ký</button>
                <span id="registerMessage" style="color: red; text-align: center;"></span>
            </div>
        </div>

        <!-- Màn hình chính 300x95%--> 
        <div id="mainScreen"
            style=" display: none; flex-direction: row; gap: 5px; padding: 5px 5px; height: 70vh; min-width: 30%; justify-content: flex-start; border-radius: 20px; 
            width: 95%; border: 5px solid; background: rgba(245, 233, 194, 0.5); box-shadow: rgb(178 103 50) 0px 4px 8px 0px; position: relative;resize: both;
            overflow: hidden;">
            
            <div style="width: 20px;height: 20px;border-radius: 5px;color: black;background: #f5deb34a;position: absolute;
                        bottom: 5px;left: 10px;font-size: 15px;font-weight: bold;display: flex; flex-direction: column;
                        align-content: center;justify-content: center;align-items: center;text-align: center;cursor: pointer; z-index: 3;border: 2px solid;
                " onclick="openFullscreen()">
                [ ]
            </div>
            
            <div id="viewport"
                style="width: 100%; height: 100%; overflow: hidden; position: relative; border: 2px solid #fff;border-radius: 10px;">
                <div id="mapHunter"
                    style="position: absolute; width: 1024px; height: 1536px; background-image: url('https://res.cloudinary.com/dxgawkr4g/image/upload/v1744952970/xgbyxzwiwtbu3j3faxwm.png'); background-size: cover;">
                    <img id="playerHunter"
                        src="https://res.cloudinary.com/dxgawkr4g/image/upload/v1745392663/ag6fwzqxc7c518dpjj8p.png" style="
                          width: 32px;
                          height: 32px;
                          position: absolute;
                          z-index: 2;
                          pointer-events: none;
                          user-select: none;">
                </div>
            </div>
            
            <div style="display: flex;flex-direction: row;width: 100%;z-index: 3;position: absolute;top: 4px;left: 2px;">
                <div style="width:20px;height: 20px;color: white;border-radius: 50px;padding: 10px;text-align: center;
                    display: flex;justify-content: space-between;align-items: center;border: solid 2px #bd8f17;
                    background: url(https://bathanh.com.vn/wp-content/uploads/2017/08/default_avatar.png);
                    background-size: cover;
                    z-index: 1;
                    ">
                </div>
                <div style="display:flex; flex-direction: column">
                    <div style="background: #744620;color: white;border-radius: 8px;padding: 6px;padding-left: 35px;padding-right: 15px;
                        text-align: center;font-size: 12px;font-weight: bold; display: flex;flex-direction: row; height: 10px;
                        justify-content: center;align-items: center; margin-left: -30px; gap: 5px;
                        ">
                        <span id="nameUser" style="text-align: left;">quangvanviet</span>
                        <span id="isRanking" style="align-items: left">(Top: 5)</span>
                    </div>
                    <div onclick="messageOpen('Đây là thể lực, khi hết thể lực sẽ khó săn tìm 5Mon hơn')" style="gap: 3px;display: flex;flex-direction: row;align-content: center;align-items: center;width: 113%; margin-left: -10px;">
                        <div id="staminaBar" style=" width: 100%; height: 15px; background-color: #555; border-radius: 10px; position: relative; box-shadow: #00000070 1px 1px 1px 1px;">
                            <div id="staminaFill" style="height: 100%; background-color: rgb(89 219 178); border-radius: 10px; width: 100%;">
                            </div>
                            <div id="staminaText" style="font-weight: bold; position: absolute; top: 1px; left: 50%; transform: translateX(-50%); color: white; font-size: 12px; z-index: 1;">
                                100/100</div>
                        </div>
                        <span style="background: orange; border-radius: 30px; width: 15px; height: 15px; font-size: 15px; font-weight: bold;box-shadow: #00000087 1px 1px 1px 1px;padding: 1px;" onmouseover="this.style.background='red'; this.style.transform='scale(1.2)';" onmouseout="this.style.background='orange'; this.style.transform='scale(1)';" onclick="showUpStamina()">
                            +
                        </span>
                    </div>
                </div>
                <div style="background: #a9754b;color: #fff;border-radius: 8px;padding: 6px;padding-top: 38px;font-size: 10px;font-weight: bold;
                    display: flex; flex-direction: column;position: absolute;top: 10px;margin-left: 2px;
                    align-items: flex-start;justify-content: flex-start;width: 10px; gap: 3px;">
                    <div id="infoGoldDiamond" style="display: flex;gap: 2px;font-size: 12px;flex-direction: column;align-content: center;justify-content: center;align-items: flex-start;min-width: 50px;">
                        <!-- Vàng -->
                        <div onclick="messageOpen('Đây là vàng dùng để mua vật phẩm trong cửa hàng')" style="
                            background: #ff7900ad;
                            padding: 2px;
                            width: 100%;
                            border-radius: 5px;
                            text-align: left;
                            border: 1px solid #6633999c;
                            display: flex;
                            gap: 4px;
                            flex-direction: row;
                        ">
                            <i class="fa-solid fa-coins"></i>
                            <span id="goldUser" style="align-items: left">1000000</span>
                        </div>
                        <!-- Ticket -->
                        <div onclick="messageOpen('Đây là vé đổi dùng để đổi trong cửa hàng')" style="
                            background: #ff7900ad;
                            padding: 2px;
                            width: 100%;
                            border-radius: 5px;
                            text-align: left;
                            border: 1px solid #6633999c;
                            display: flex;
                            gap: 4px;
                            flex-direction: row;
                        ">
                            <i class="fa-solid fa-ticket-simple"></i>
                            <span id="ticketUser" style="align-items: left">0</span>
                        </div>
    
                        <!-- Ruby -->
                        <div onclick="messageOpen('Đây là kim cương dùng để mua vật phẩm trong cửa hàng')" style="
                            background: #ff7900ad;
                            padding: 2px;
                            width: 100%;
                            border-radius: 5px;
                            text-align: left;
                            border: 1px solid #6633999c;
                            display: flex;
                            gap: 4px;
                            flex-direction: row;
                        ">
                            <i class="fa-solid fa-gem"></i>
                            <span id="diamondUser" style="align-items: left">0</span>
                        </div>
                        <div onclick="messageOpen('Đây là điểm xếp hạng')" style="
                            background: #ff7900ad;
                            padding: 2px;
                            width: 100%;
                            border-radius: 5px;
                            text-align: left;
                            border: 1px solid #6633999c;
                            display: flex;
                            gap: 4px;
                            flex-direction: row;">
                            <!-- Rank point -->
                            <i class="fa-solid fa-medal"></i>
                            <span id="pointRank" style="align-items: left">0</span>
                        </div>
                    </div>
                    <div style="background: white;padding: 4px;border-radius: 15px;width: 10px;height: 10px;color: black;font-size: 16px;
                        font-weight: bold;cursor: pointer; display: flex; align-items: center; justify-content: center;"
                        onmouseover="this.style.transform='scale(1.2)';" 
                        onmouseout="this.style.transform='scale(1)';" 
                        onclick="hideOrShowInfoGoldDiamond()">
                        <div id="hideOrShowInfoGoldDiamond" style="transform: scaleY(1);">^</div>
                    </div>
                </div>
            </div>
            
            <div style="display: flex;flex-direction: column;z-index: 3;position: absolute;top: 10px;right: 10px;align-items: flex-end;">
                <button id="autoButton" onclick="toggleAutoMovement()">Tự động săn</button>
            </div>
            
            <div id="menu1" style="display: flex;flex-direction: column-reverse;gap: 5px;position: absolute;bottom: 6px;right: 10px;z-index: 3; max-width: 100px; width: 100px;">
                <!-- Nút Mở rộng -->
                <button id="toggleMenu" style="width: 100px; padding: 4px 6px; background-color: #4CAF50; color: white; border-radius: 5px; cursor: pointer; transition: 0.3s;
                    border: 2px solid #ffffff2b; box-shadow: 1px 1px 1px 1px #19521b; font-weight: bold;">Thu gọn</button><!-- Các nút ẩn -->
                
            <div id="menuButtons1" style="display: flex;flex-direction: column-reverse;gap: 3px;font-weight: bold;">
                    <button id="openBag" style="padding: 4px 6px; background-color: #2196F3; color: white; border-radius: 5px; cursor: pointer;
                        border: 2px solid #ffffff2b;box-shadow: 1px 1px 1px 1px #000000ba;" 
                        onmouseover="this.style.transform='scale(1.1)';" 
                        onmouseout="this.style.transform='scale(1)';" 
                        onclick="openBag()">
                        Tủ đồ
                    </button>
                    <button style="padding: 4px 6px; background-color: #2196f3; color: white; border-radius: 5px; cursor: pointer;
                        border: 2px solid #ffffff2b;box-shadow: 1px 1px 1px 1px #000000ba;"
                        onmouseover="this.style.transform='scale(1.1)';" 
                        onmouseout="this.style.transform='scale(1)';" 
                        onclick="openShop()">
                        Cửa hàng
                    </button>
                    <button style="padding: 4px 6px; background-color: #2196f3; color: white; border-radius: 5px; cursor: pointer;
                        border: 2px solid #ffffff2b;box-shadow: 1px 1px 1px 1px #000000ba; position: relative;"
                        onmouseover="this.style.transform='scale(1.1)';" 
                        onmouseout="this.style.transform='scale(1)';" 
                        onclick="openQuestBoard()">
                        Nhiệm vụ
                        <div id="flagQuest" style="position: absolute;bottom: 0px;right: 0px;font-size: 30px;color: red;text-shadow: 1px 1px black;">
                            •
                        </div>
                    </button>
                    <button style="padding: 4px 6px; background-color: #2196f3; color: white; border-radius: 5px; cursor: pointer;
                        border: 2px solid #ffffff2b;box-shadow: 1px 1px 1px 1px #000000ba; position: relative;"
                        onmouseover="this.style.transform='scale(1.1)';" 
                        onmouseout="this.style.transform='scale(1)';" 
                        onclick="openPopupSettingMain()">
                        Tùy chỉnh
                    </button>
                </div>
            </div>
            
            <div id="menu2"
                style="display: flex; flex-direction: row-reverse; gap: 5px; position: absolute; bottom: 6px; right: 10px; z-index: 2;">
                <button
                    style="width: 100px;padding: 4px 6px; background-color: #4CAF50; color: white; border-radius: 5px; cursor: pointer; transition: 0.3s;
                     border: 2px solid #ffffff2b; box-shadow: 1px 1px 1px 1px #19521b; font-weight: bold;">
                    Mở rộng
                </button>
        
                <!-- Các nút ẩn -->
                <div id="menuButtons2" style="display: flex; flex-direction: row-reverse; gap: 3px; font-weight: bold;">
                    <button id="openGame"
                        style="padding: 4px 6px; background-color: #2196F3; color: white; border-radius: 5px; 
                        cursor: pointer;border: 2px solid #ffffff2b;box-shadow: 1px 1px 1px 1px #000000ba;"
                        onmouseover="this.style.transform='scale(1.1)';" 
                        onmouseout="this.style.transform='scale(1)';" 
                        onclick="openMenuStartGame()"
                        >Vào trận</button>
                    <button
                        style="padding: 4px 6px; background-color: #2196f3; color: white; border-radius: 5px; 
                        cursor: pointer;border: 2px solid #ffffff2b;box-shadow: 1px 1px 1px 1px #000000ba;"
                        onmouseover="this.style.transform='scale(1.1)';" 
                        onmouseout="this.style.transform='scale(1)';" 
                        onclick="openRankBoard()"
                        >Bảng xếp hạng</button>
                    </button>
                    <button
                        style="padding: 4px 6px; background-color: #2196f3; color: white; border-radius: 5px; 
                        cursor: pointer;border: 2px solid #ffffff2b;box-shadow: 1px 1px 1px 1px #000000ba;"
                        onmouseover="this.style.transform='scale(1.1)';" 
                        onmouseout="this.style.transform='scale(1)';" 
                        >Bảng tin
                    </button>
                </div>
            </div>
        
        </div>
        
        <!-- Màn hình shop -->
        <div id="shopScreen" style="
        display: none;
        flex-direction: row;
        gap: 5px;
        padding-left: 10px;
        padding-right: 10px;
        padding-top: 20px;
        padding-bottom: 20px;
        height: 350px;
        min-width: 30%;
        justify-content: space-between;
        border-radius: 20px;
        width: 95%;
        border: 5px solid;
        background: rgba(245, 233, 194, 0.5);
        box-shadow: rgb(178 103 50) 0px 4px 8px 0px;
      ">
            <div style="width: 30px;height: 30px;border-radius: 5px;color: black;background: wheat;position: absolute;top: -22px;left: 40px;
                    font-size: 20px;font-weight: bold;display: flex;flex-direction: column;align-content: center;justify-content: center;
                    align-items: center;text-align: center;cursor: pointer;" onclick="openFullscreen()">
                [ ]
            </div>
            <!-- Vùng Left -->
            <div style="width: 95%; height: 100%; display: flex; flex-direction: column; gap: 5px;">
                <!-- vùng header shop -->
                <div
                    style="display: flex; flex-direction: row; justify-content: space-between; align-items: center; background: #744620; padding: 5px; border-radius: 5px; position: relative;">
                    <!-- thông tin vàng + vé đổi ... -->
                    <div
                        style="background: #fff300; color: #744620; border-radius: 8px; padding: 5px; font-size: 12px; font-weight: bold; box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1);display: flex; flex-direction: row; min-width: 100px; position: absolute; justify-content: center; align-items: center; gap: 15px; ">
                        <!-- Vàng -->
                        <div onclick="messageOpen('Đây là vàng dùng để mua vật phẩm trong cửa hàng')">
                            <i class="fa-solid fa-coins"></i>
                            <span id="goldUserShop" style="align-items: left">1000</span>
                        </div>
                        <!-- Ticket -->
                        <div onclick="messageOpen('Đây là vé đổi dùng để đổi trong cửa hàng')">
                            <i class="fa-solid fa-ticket-simple"></i>
                            <span id="ticketUserShop" style="align-items: left">1000</span>
                        </div>
                        <!-- Ruby -->
                        <div onclick="messageOpen('Đây là kim cương dùng để mua vật phẩm trong cửa hàng')">
                            <i class="fa-solid fa-gem"></i>
                            <span id="diamondUserShop" style="align-items: left">0</span>
                        </div>
                    </div>

                    <!-- Tên shop -->
                    <div
                        style="display: flex; flex-direction: column; justify-content: center; align-items: center; width: 100%; font-size: 18px; font-weight: bold;">
                        <span>Cửa hàng</span>
                    </div>

                    <div id="paymentButton" onclick="openPaymentGateway()"
                        style="background: #fff300; color: #744620; border-radius: 8px; padding: 5px; font-size: 12px; font-weight: bold; box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1);display: flex; flex-direction: row; min-width: 100px; position: absolute; justify-content: center; align-items: center; gap: 15px; right: 6px; cursor: pointer">
                        <!-- Ruby -->
                        <div>
                            <span style="align-items: left">Nạp </span>
                            <i class="fa-solid fa-gem"></i>
                        </div>
                    </div>

                </div>

                <!-- Vùng mid shop -->
                <div style="display: flex; height: 100%; flex-direction: row; justify-content: center;">
                    <!-- Vùng screen shop -->
                    <div id="screenShop"
                        style="display: flex; flex-direction: column; width: 100%; height: 100%; border-radius: 10px; border: 3px solid white; background: #edd096; box-shadow: rgb(178 103 50) -1px -1px 5px 2px;">
                        <!-- screenGacha -->
                        <div id="gachaPage" style="display: flex; flex-direction: column; height: 100%; width: 100%; position: relative">
                            
                            <!-- Nút tủ đồ -->
                            <div style="display: flex;flex-direction: column;gap: 5px;position: absolute;top: 3px;right: 3px;">
                                <button onclick="openBag('Left')" style="padding: 10px 20px;background: rgb(39 185 58);color: white;border: none;border-radius: 5px;cursor: pointer;font-weight: bold;box-shadow: 1px 2px 1px 1px #00000099;">
                                    Tủ đồ
                                </button>
                                
                            </div>
                            
                            <!-- Title / message -->
                            <div
                                style="display: flex; flex-direction: column; width: 100%; height: 12%; color: firebrick; margin-top: 10px;">
                                <span id="messageShop1" style="height: 100%; width: 100%; font-weight: bold;">Tìm kiếm
                                    cho mình một đội hình 5Mon ngay nào!</span>
                                <span style="font-style: italic;">5Mon nào đã sở hữu sẽ được đổi sang vé đổi</span>
                            </div>

                            <!-- Gacha machine -->
                            <div id="slotGacha"
                                style="display: flex; flex-direction: row; height: 60%; width: 100%; justify-content: space-evenly; align-items: center; color: rebeccapurple">
                                <!-- Chứa các slot -->
                                <div id="skill1S" class="slotSkillGacha">?
                                </div>
                                <div id="skill2S" class="slotSkillGacha">?
                                </div>
                                <div id="skill3S" class="slotSkillGacha">?
                                </div>
                                <div id="skill4S" class="slotSkillGacha">?
                                </div>
                                <div id="skill5S" class="slotSkillGacha">?
                                </div>
                            </div>

                            <div id="slotGachaText"
                                style="display: flex; flex-direction: row; height: 10%; justify-content: space-evenly; align-items: center; font-size: 15px; margin-top: -25px;">
                                <div id="skill1SText" style="width: 100px; font-weight: bold;color: firebrick;">
                                </div>
                                <div id="skill2SText" style="width: 100px; font-weight: bold;color: firebrick;">
                                </div>
                                <div id="skill3SText" style="width: 100px; font-weight: bold;color: firebrick;">
                                </div>
                                <div id="skill4SText" style="width: 100px; font-weight: bold;color: firebrick;">
                                </div>
                                <div id="skill5SText" style="width: 100px; font-weight: bold;color: firebrick;">
                                </div>
                            </div>

                            <!-- Button gacha -->
                            <div
                                style="display: flex; flex-direction: row; height: 10%; justify-content: center; align-items: center; gap: 15px; margin-top: 5px;">
                                <div style="display: flex; flex-direction: column; gap: 5px">
                                    <button id="gachax1" onclick="gacha5Mon(false)" style="
                                                                padding: 10px 20px;
                                                                background: #d9534f;
                                                                color: white;
                                                                border: none;
                                                                border-radius: 5px;
                                                                cursor: pointer;
                                                                font-weight: bold;
                                                                ">
                                        Quay x1
                                    </button>
                                    <span style=" color: #d9534f;font-size: 13px; font-weight: bold;"><i class="fa-solid fa-coins"></i>: 5000</span>
                                </div>
                                <div style="display: flex; flex-direction: column; gap: 5px">
                                    <button id="gachax5" onclick="gacha5Mon(true)" style="
                                                                padding: 10px 20px;
                                                                background: #d9534f;
                                                                color: white;
                                                                border: none;
                                                                border-radius: 5px;
                                                                cursor: pointer;
                                                                font-weight: bold;
                                                                ">
                                        Quay x5
                                    </button>
                                    <span style=" color: #d9534f;font-size: 13px; font-weight: bold;"><i class="fa-solid fa-coins"></i>: 15000</span>
                                </div>
                            </div>

                        </div>


                        <!-- shop page -->
                        <div id="shopPage" style="display: none; flex-flow: column wrap;
                height: 310px;
                align-items: center;
                overflow-x: auto;
                place-content: center;
                flex-direction: column;
                justify-content: flex-start;">

                            <!-- Hàng 1 -->
                            <div id="shopRow1" style="display: flex;
                  flex-direction: row;
                  border-radius: 10px;
                  gap: 20px;
                  border: 5px solid #ff000000;
                  flex-wrap: wrap;
                  justify-content: center;
                  align-content: center;"></div>
                        </div>

                        <!-- đổi page -->
                        <div id="exchangePage"
                            style="display: none; flex-direction: column; height: 300px; justify-content: space-evenly;">
                            <!-- Hàng 1 -->
                            <div id="exchangeRow1" class="exchangeRow" style="height: 100%"></div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Vùng right (nút bám)-->
            <div
                style="width: 5%; height: 100%; display: flex; flex-direction: column; justify-content: space-between; align-items: center; border-radius: 10px;">
                <button id="backShopPageButton"
                    style="width: 90%; min-height: 22%; background: firebrick; color: white; font-size: 12px; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s ease-in-out; text-align: center; display: flex; align-items: center; justify-content: center;"
                    onclick="closeShop()">Quay<br>lại</button>

                <button id="shopPageButton"
                    style="width: 90%; min-height: 22%; background: firebrick; color: white; font-size: 12px; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s ease-in-out; text-align: center; display: flex; align-items: center; justify-content: center;"
                    onclick="changePageShop('shopPage')">Mua</button>

                <button id="gachaPageButton"
                    style="width: 90%; min-height: 22%; background: firebrick; color: white; font-size: 12px; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s ease-in-out; text-align: center; display: flex; align-items: center; justify-content: center;"
                    onclick="changePageShop('gachaPage')">Quay</button>

                <button id="exchangePageButton"
                    style="width: 90%; min-height: 22%; background: firebrick; color: white; font-size: 12px; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s ease-in-out; text-align: center; display: flex; align-items: center; justify-content: center;"
                    onclick="changePageShop('exchangePage')">Đổi</button>
            </div>

        </div> <!-- Đóng shopScreen -->

        <!-- Popup nhiệm vụ / popup Quest -->
        <div id="popupQuestBoard"
            style="z-index: 5;max-width: 600px; display: flex; flex-direction: row;justify-content: center;align-items: center; position: absolute"
            class="hiddenDiv">
            
            <!-- Div nhiệm vụ -->
            <div
                style="max-width: 400px;min-width: 400px;height: 275px;padding: 5px;background: rgb(246, 187, 123);border-radius: 10px;z-index: 1000;color: white;position: relative;display: flex;flex-direction: column;justify-content: flex-start;align-items: center;border: 4px solid wheat;box-shadow: rgb(177, 112, 42) 1px 2px 1px 2px;">

                <div
                    style="background: #c33333;position: absolute;top: -20px;width: 200px;height: 18px;display: flex;color: #ffffff;font-size: 16px;font-weight: bold;border-radius: 10px;border: 4px solid #9d090947;box-shadow:rgb(137 4 4) 1px 2px 1px 2px;justify-content: center;align-items: center;outline: 2px solid;text-shadow: 1px 2px 1px #921919;">
                    NHIỆM VỤ</div>

                <div
                    style="padding: 5px;background: #f08888;border-radius: 8px;margin-bottom: 10px;display: flex;flex-direction: row;justify-content: space-around;align-items: center;margin-top: 15px;position: relative;border: 2px solid wheat;box-shadow: rgb(119 38 38 / 81%) 1px 1px 1px 1px;height: 255px;width: 97%;">

                    <div
                        style="position: absolute;top: -10px;display: flex;flex-direction: row;justify-content: center;align-items: center;gap: 25px;width: 100%;">
                        <span id="buttonQuestDay"
                            style="color: rgb(255, 255, 255); font-size: 13px; font-weight: bold; background: rgb(168, 48, 48); padding: 1px 10px; border-radius: 15px; border: 2px solid rgb(119, 38, 38); box-shadow: rgba(50, 50, 50, 0.53) 1px 1px 1px 1px; transform: scale(1); cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.02)';"
                            onmouseout="this.style.transform='scale(1)';" onclick="loadQuest('Day')">Nhiệm
                            vụ ngày</span>
                        <span id="buttonQuestWeek"
                            style="color: rgb(255, 255, 255); font-size: 13px; font-weight: bold; background: rgb(222, 109, 62); padding: 1px 10px; border-radius: 15px; border: 2px solid rgb(119, 38, 38); box-shadow: rgba(50, 50, 50, 0.53) 1px 1px 1px 1px; transform: scale(1); cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.02)';"
                            onmouseout="this.style.transform='scale(1)';" onclick="loadQuest('Week')">Nhiệm
                            vụ tuần</span>
                    </div>

                    <div id="boardAddQuest"
                        style="display: flex;flex-direction: column;font-size: 12px;color: black;height: 230px;overflow-y: auto;border-radius: 15px;margin-top: 10px;align-items: center;padding: 5px;gap: 3px;">

                    </div>
                </div>
            </div>
            <!-- Div điểm danh -->
            <div
                style="max-width: 220px;min-width: 220px;height: 275px;padding: 5px;background: rgb(246, 187, 123);border-radius: 10px;z-index: 1000;color: white;position: relative;display: flex;flex-direction: column;justify-content: flex-start;align-items: center;border: 4px solid wheat;box-shadow: rgb(177, 112, 42) 1px 2px 1px 2px;">
                <button
                    style="position: absolute; margin: 5px; border-radius: 42px; cursor: pointer; font-size: 16px; top: -20px; right: -20px; padding: 5px 10px; border: 2px solid wheat; box-shadow: rgb(188, 119, 45) 0px 2px 1px 1px; background: rgb(240, 115, 115); color: white; font-weight: bold; transform: scale(1);"
                    onmouseover="this.style.background='#ea3e3e'; this.style.transform='scale(1.05)';"
                    onmouseout="this.style.background='#f07373'; this.style.transform='scale(1)';"
                    onclick="showOrHiddenDiv('popupQuestBoard')">x</button>

                <div
                    style="background: #c33333;position: absolute;top: -20px;width: 120px;height: 18px;display: flex;color: #ffffff;font-size: 16px;font-weight: bold;border-radius: 10px;border: 4px solid #9d090947;box-shadow:rgb(137 4 4) 1px 2px 1px 2px;justify-content: center;align-items: center;outline: 2px solid;text-shadow: 1px 2px 1px #921919;">
                    ĐIỂM DANH</div>

                <div
                    style="padding: 5px;background: #f08888;border-radius: 8px;width: 97%;border: 2px solid wheat;margin-bottom: 15px;display: flex;flex-direction: column;justify-content: flex-start;align-items: center;margin-top: 15px;box-shadow: rgb(119 38 38 / 81%) 1px 1px 1px 1px;position: relative;height: 255px;gap: 28px;">
                    <span
                        style="color: #fffbfa;font-size: 13px;font-weight: bold;background: #30a8a1;padding: 1px 15px;border-radius: 15px;position: absolute;top: -10px;border: 2px solid #266f77;box-shadow: rgb(43 44 44 / 42%) 1px 1px 1px 1px;">Ngày
                        thứ</span>
                    <div
                        style="display: flex;flex-direction: row;justify-content: center;align-items: center;gap: 10px;margin-top: 15px;flex-wrap: wrap;">
                        <span id="checkint2"
                            style="display: inline-block; width: 30px; height: 30px; line-height: 30px; border-radius: 50%; background: gray; margin: 3px; box-shadow: rgba(0, 0, 0, 0.36) 1px 1px 1px 1px; border: 2px solid wheat; transform: scale(1); cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.2)';"
                            onmouseout="this.style.transform='scale(1)';">2</span>
                        <span id="checkint3"
                            style="display: inline-block; width: 30px; height: 30px; line-height: 30px; border-radius: 50%; background: gray; margin: 3px; box-shadow: rgba(0, 0, 0, 0.36) 1px 1px 1px 1px; border: 2px solid wheat; transform: scale(1); cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.2)';"
                            onmouseout="this.style.transform='scale(1)';">3</span>
                        <span id="checkint4"
                            style="display: inline-block; width: 30px; height: 30px; line-height: 30px; border-radius: 50%; background: gray; margin: 3px; box-shadow: rgba(0, 0, 0, 0.36) 1px 1px 1px 1px; border: 2px solid wheat; transform: scale(1); cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.2)';"
                            onmouseout="this.style.transform='scale(1)';">4</span>
                        <span id="checkint5"
                            style="display: inline-block; width: 30px; height: 30px; line-height: 30px; border-radius: 50%; background: gray; margin: 3px; box-shadow: rgba(0, 0, 0, 0.36) 1px 1px 1px 1px; border: 2px solid wheat; transform: scale(1); cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.2)';"
                            onmouseout="this.style.transform='scale(1)';">5</span>
                        <span id="checkint6"
                            style="display: inline-block; width: 30px; height: 30px; line-height: 30px; border-radius: 50%; background: gray; margin: 3px; box-shadow: rgba(0, 0, 0, 0.36) 1px 1px 1px 1px; border: 2px solid wheat; transform: scale(1); cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.2)';"
                            onmouseout="this.style.transform='scale(1)';">6</span>
                        <span id="checkint7"
                            style="display: inline-block; width: 30px; height: 30px; line-height: 30px; border-radius: 50%; background: gray; margin: 3px; box-shadow: rgba(0, 0, 0, 0.36) 1px 1px 1px 1px; border: 2px solid wheat; transform: scale(1); cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.2)';"
                            onmouseout="this.style.transform='scale(1)';">7</span>
                        <span id="checkincn"
                            style="display: inline-block; width: 30px; height: 30px; line-height: 30px; border-radius: 50%; background: gray; margin: 3px; box-shadow: rgba(0, 0, 0, 0.36) 1px 1px 1px 1px; border: 2px solid wheat; transform: scale(1); cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.2)';"
                            onmouseout="this.style.transform='scale(1)';">CN</span>
                    </div>

                    <!-- Thanh chăm chỉ -->
                    <div
                        style="display: flex;flex-direction: column;align-content: center;width: 100%;align-items: center;gap: 15px;justify-content: space-around;">
                        <div
                            style="display: flex;flex-direction: row;width: 100%;align-content: center;justify-content: center;align-items: center;">
                            <div style="display: flex;flex-direction: column;width: 100%;">
                                <div
                                    style="width: 100%;height: 20px;background: #00000059;border-radius: 5px;overflow: hidden;">
                                    <div id="timeLine" style="width: 50%;height: 100%;background: #30a8a1;">
                                    </div>
                                </div>
                            </div>

                            <div id="timeLineText" style="width: 15%;position: absolute;">
                                (6/6)
                            </div>
                        </div>
                        <i id="timeLineGift" class="fa-solid fa-gift"
                            style="font-size: 50px; text-shadow: rgb(88, 16, 16) 2px 2px; color: white; cursor: pointer; transform: scale(1); padding: 16px;"
                            onmouseover="this.style.transform='scale(1.2)';"
                            onmouseout="this.style.transform='scale(1)';"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bảng xếp hạng -->
        <div id="rankBoard"
            style="z-index: 5;width: 100%; max-width: 600px; margin: auto; border-radius: 10px; padding: 10px; background: rgb(83 183 133); font-size: 12px; min-height: 330px; position: absolute; border: 4px solid #5dd69a; box-shadow: rgb(50 111 124) 1px 2px 1px 1px;transition: opacity 0.5s ease 0s, transform 1s ease 0s; flex-direction: column; outline: 1px solid #00000030;"
            class="hiddenDiv">
            <button style="position: absolute; margin: 5px; border-radius: 42px; cursor: pointer; font-size: 15px; 
                top: -20px; right: -20px; padding: 3px 8px; border: 2px solid wheat; box-shadow: rgb(188, 119, 45) 0px 2px 1px 1px; 
                background: rgb(234, 62, 62); color: white; font-weight: bold; transform: scale(1.05); z-index: 6;" 
                onmouseover="this.style.background='#ea3e3e'; this.style.transform='scale(1.05)';" 
                onmouseout="this.style.background='rgb(145 16 134)'; this.style.transform='scale(1)';" 
                onclick="showOrHiddenDiv('rankBoard')">x</button>
            <div
                style="display: flex;flex-direction: row;width: 100%;align-content: center;justify-content: center;align-items: center;">
                <div
                    style="background: #164049;position: absolute;top: -20px;width: 200px;height: 23px;display: flex;color: #2fe98c;font-size: 16px;font-weight: bold;border-radius: 10px;border: 3px solid #256876;box-shadow: rgb(17 50 57) 1px 2px 1px 2px;justify-content: center;align-items: center;">
                    BẢNG XẾP HẠNG</div>
            </div>

            <button id="prev-page" disabled
                style="font-size: 22px;font-weight: bold;color: #17f586;background-color: rgb(145, 46, 99);border-radius: 5px;border: 2px solid #bc4585;height: 25px;width: 25px;display: flex;cursor: pointer;position: absolute;z-index: 1; top: 155px;left: -20px;place-content: center;align-items: center;box-shadow: rgb(90 24 59) 1px 1px 1px 1px;"
                onmouseover="this.style.transform='scale(1.2)'; this.style.color='white'; this.style.transition='transform 0.3s ease, color 0.3s ease';"
                onmouseout="this.style.transform='scale(1)'; this.style.color='#17f586'; this.style.transition='transform 0.3s ease, color 0.3s ease';"
                onclick="changePage(-1)">
                ◀
            </button>

            <button id="next-page" disabled
                style="font-size: 22px;font-weight: bold;color: #17f586;background-color: rgb(145, 46, 99);border-radius: 5px;border: 2px solid #bc4585;height: 25px;width: 25px;display: flex;cursor: pointer;position: absolute;z-index: 1; top: 155px; right: -20px;place-content: center;align-items: center;box-shadow: rgb(90 24 59) 1px 1px 1px 1px;"
                onmouseover="this.style.transform='scale(1.2)'; this.style.color='white'; this.style.transition='transform 0.3s ease, color 0.3s ease';"
                onmouseout="this.style.transform='scale(1)'; this.style.color='#17f586'; this.style.transition='transform 0.3s ease, color 0.3s ease';"
                onclick="changePage(1)">
                ▶
            </button>

            <table id="leaderboard-table"
                style="width: 100%; border-collapse: collapse; table-layout: fixed; height: 30px; margin-top: 5px;">
                <thead>
                    <tr style="background: #164049; color: white;">
                        <th style="width: 10%;"></th>
                        <th style="width: 15%;">Top</th>
                        <th style="width: 40%;">Tên người chơi</th>
                        <th style="width: 25%;">Điểm xếp hạng</th>
                        <th style="width: 10%;"></th>
                    </tr>
                </thead>
            </table>

            <div id="leaderboard-wrapper" style="max-height: 280px; overflow-y: auto;">
                <table id="leaderboard-table"
                    style="width: 100%; border-collapse: separate;border-spacing: 0 7px;">
                    <tbody id="leaderboard-body"></tbody>
                </table>
            </div>

            <div id="myRank" style="max-height: 30px;">
                <table id="leaderboard-table"
                    style="width: 100%; border-collapse: collapse; table-layout: fixed;">
                    <thead>
                        <tr
                            style="background: rgb(168 2 2); color: white; height: 30px; clip-path: polygon(2% 0%, 98% 0%, 100% 50%, 98% 110%, 2% 110%, 0% 50%); box-shadow: rgb(0 0 0 / 59%) 0px 3px 2px 0px;">
                            <td style="width: 10%; text-align: right;">Bạn:</td>
                            <td id="myRankTop" style="width: 15%; text-align: center;">Top</td>
                            <td id="myRankName" style="width: 40%; text-align: center; font-weight: bold;">
                                Người chơi</td>
                            <td id="myRankPoint" style="width: 25%; text-align: center;">Điểm</td>
                            <td style="width: 10%; text-align: center;"></td>
                        </tr>
                    </thead>
                </table>
            </div>
        </div>
        
        <!-- start game screen -->
        <div id="menuStartGame"
            style="gap: 8px; z-index: 5;display: flex;flex-direction: column;min-width: 600px; max-width:600px;margin: auto;border-radius: 10px;padding: 5px;background: rgb(238, 210, 155);font-size: 12px;min-height: 275px;position: relative;justify-content: space-between;align-items: flex-start;box-shadow: rgb(177 112 42) 1px 2px 1px 2px;border: 5px solid white;color: rgb(116, 70, 32); position: absolute"
            class="hiddenDiv">
            <button style="position: absolute; margin: 5px; border-radius: 42px; cursor: pointer; font-size: 15px; top: -20px; 
                right: -20px; padding: 3px 8px; border: 2px solid wheat; box-shadow: rgb(188, 119, 45) 0px 2px 1px 1px; 
                background: rgb(145, 16, 134); color: white; font-weight: bold; transform: scale(1); z-index: 6;" 
                onmouseover="this.style.background='#ea3e3e'; this.style.transform='scale(1.05)';" 
                onmouseout="this.style.background='rgb(145 16 134)'; this.style.transform='scale(1)';" 
                onclick="showOrHiddenDiv('menuStartGame')">x</button>
            <div
                style="display: flex; flex-direction: row;gap: 10px;justify-content: space-between;width: 98%;align-items: center;height: 15px;padding: 5px;background: #a9754b;border-radius: 15px;box-shadow: rgb(117 56 5) 1px 2px 1px 1px;color: wheat;">
                <span
                    style="font-weight: bold;border-radius: 5px;height: 100%;display: flex;align-items: center;justify-content: center; padding: 5px;">Chế
                    độ chơi:</span>
                <div style="display: flex; flex-direction: row; gap: 10px; padding: 5px;">
                    <div id="valueButtonTypeGame1"
                        style="background: #c25c5c;border: 1px solid; border-radius: 10px; padding: 5px;min-width: 100px; cursor: pointer; 
                        box-shadow: rgb(99 31 31) 1px 1px 1px 1px; display: flex; place-content: center; align-items: center; font-weight: bold;"
                        onmouseover="this.style.transform='scale(1.03)';"
                        onmouseout="this.style.transform='scale(1)';"
                        onclick="checkButtonTypeGame('Conquest')">Chinh phục</div>
                    <div id="valueButtonTypeGame2"
                        style="background: #c25c5c;border: 1px solid; border-radius: 10px; padding: 5px;min-width: 100px; cursor: pointer; 
                        box-shadow: rgb(99 31 31) 1px 1px 1px 1px; display: flex; place-content: center; align-items: center; font-weight: bold;"
                        onmouseover="this.style.transform='scale(1.03)';"
                        onmouseout="this.style.transform='scale(1)';"
                        onclick="checkButtonTypeGame('Solo5Mon')">Đối kháng</div>
                    <div id="valueButtonTypeGame3"
                        style="background: #c25c5c;border: 1px solid; border-radius: 10px; padding: 5px;min-width: 100px; cursor: pointer; 
                        box-shadow: rgb(99 31 31) 1px 1px 1px 1px; display: flex; place-content: center; align-items: center; font-weight: bold;"
                        onmouseover="this.style.transform='scale(1.03)';"
                        onmouseout="this.style.transform='scale(1)';"
                        onclick="checkButtonTypeGame('Guess')">Dự đoán</div>
                </div>
            </div>

            <div
                style="display: flex;flex-direction: row;gap: 10px;min-height: 215px; height: 195px;min-width: 97%;justify-content: space-between;align-items: center;border: 3px solid white;border-radius: 10px;padding: 5px;background: #f5deb3; box-shadow: rgb(177 112 42) 1px 2px 1px 2px">
                <div id="menuGameRank"
                    style="display: flex; flex-direction: column; gap: 10px;background: #cf9e77;height: 98%;border-radius: 10px;justify-content: flex-start;padding: 5px; width: 25%; box-shadow: rgb(169 117 75) 1px 2px 1px 1px; font-weight: bold;">
                    <div id="valueButtonModeGame1"
                        style="background: #c25c5c;border-radius: 10px;padding: 5px;color: wheat; cursor: pointer;box-shadow: rgb(99 31 31) 1px 2px 1px 1px;"
                        onmouseover="this.style.transform='scale(1.03)';"
                        onmouseout="this.style.transform='scale(1)';"
                        onclick="checkButtonModeGame('Guide')">Tập luyện</div>
                    <div id="valueButtonModeGame2"
                        style="background: #c25c5c;border-radius: 10px;padding: 5px;color: wheat; cursor: pointer;box-shadow: rgb(99 31 31) 1px 2px 1px 1px;"
                        onmouseover="this.style.transform='scale(1.03)';"
                        onmouseout="this.style.transform='scale(1)';"
                        onclick="checkButtonModeGame('Normal')">Đấu Thường</div>
                    <div id="valueButtonModeGame3"
                        style="background: #c25c5c;border-radius: 10px;padding: 5px;color: wheat; cursor: pointer;box-shadow: rgb(99 31 31) 1px 2px 1px 1px;"
                        onmouseover="this.style.transform='scale(1.03)';"
                        onmouseout="this.style.transform='scale(1)';" onclick="checkButtonModeGame('Rank')">
                        Xếp hạng</div>
                </div>
                <div id="descGameRank"
                    style="border: 2px solid rebeccapurple;background: #f0e4ce;border-radius: 5px;width: 70%;height: 97%;padding: 5px;text-align: justify; overflow-x: auto; gap: 10px; display: flex; flex-direction: column; justify-content: flex-start; font-size: 13px; color: rebeccapurple;">
                </div>
            </div>

            <div
                style="display: flex; flex-direction: row; gap: 3px;width: 100%;align-items: center;height: 20px;border-radius: 10px;color: wheat;justify-content: space-between; font-weight: bold;">
                <div
                    style="display: flex; flex-direction: row;width: 100%;align-items: center;height: 100%;border-radius: 10px;justify-content: space-between;background: #a9754b; padding: 3px; padding-left: 6px; padding-right: 6px; box-shadow: rgb(117 56 5) 1px 2px 1px 1px;">
                    <div>
                        Độ khó:
                    </div>

                    <div style="display: flex; flex-direction: row; gap: 10px; font-size: 12px;">
                        <div id="valueButtonDifficultyGame1"
                            style="background: #c25c5c; border-radius: 5px; min-width: 60px; padding: 3px; cursor: pointer; box-shadow: rgb(116 7 7) 0px 1px 0px 1px;display: flex;
                                align-content: center;justify-content: center;align-items: center;"
                            onmouseover="this.style.transform='scale(1.03)';"
                            onmouseout="this.style.transform='scale(1)';"
                            onclick="checkButtonDifficultyGame('Easy')">Dễ</div>
                        <div id="valueButtonDifficultyGame2"
                            style="background: #c25c5c; border-radius: 5px; min-width: 60px; padding: 3px; cursor: pointer; box-shadow: rgb(116 7 7) 0px 1px 0px 1px;display: flex;
                            align-content: center;justify-content: center;align-items: center;"
                            onmouseover="this.style.transform='scale(1.03)';"
                            onmouseout="this.style.transform='scale(1)';"
                            onclick="checkButtonDifficultyGame('Normal')">Thường</div>
                        <div id="valueButtonDifficultyGame3"
                            style="background: #c25c5c; border-radius: 5px; min-width: 60px; padding: 3px; cursor: pointer; box-shadow: rgb(116 7 7) 0px 1px 0px 1px;display: flex;
                            align-content: center;justify-content: center;align-items: center;"
                            onmouseover="this.style.transform='scale(1.03)';"
                            onmouseout="this.style.transform='scale(1)';"
                            onclick="checkButtonDifficultyGame('Hard')">Khó</div>
                        <div id="valueButtonDifficultyGame4"
                            style="background: #c25c5c; border-radius: 5px; min-width: 60px; padding: 3px; cursor: pointer; box-shadow: rgb(116 7 7) 0px 1px 0px 1px;display: flex;
                            align-content: center;justify-content: center;align-items: center;"
                            onmouseover="this.style.transform='scale(1.03)';"
                            onmouseout="this.style.transform='scale(1)';"
                            onclick="checkButtonDifficultyGame('Very Hard')">Siêu khó</div>
                        <div id="valueButtonDifficultyGame5"
                            style="background: #c25c5c; border-radius: 5px; min-width: 60px; padding: 3px; cursor: pointer; box-shadow: rgb(116 7 7) 0px 1px 0px 1px;display: flex;
                            align-content: center;justify-content: center;align-items: center;"
                            onmouseover="this.style.transform='scale(1.03)';"
                            onmouseout="this.style.transform='scale(1)';"
                            onclick="checkButtonDifficultyGame('Hell')">Địa ngục</div>
                    </div>
                </div>

                <div style="background: #2285b2; border-radius: 10px;min-width: 120px;padding: 1px; cursor: pointer; box-shadow: rgb(20 55 67) 1px 2px 1px 1px; height: 20px; display: flex; 
                    align-content: center;justify-content: center;align-items: center;"
                    onmouseover="this.style.background='#6222b2'; this.style.transform='scale(1.05)';"
                    onmouseout="this.style.background='#2285b2'; this.style.transform='scale(1)';"
                    onclick="startGame()">
                    Vào game
                </div>
            </div>
        </div>
          
        <!-- Popup tủ đồ new -->
        <div id="popupBag" class="hiddenDiv"
            style="display: flex; flex-direction: row;justify-content: center;align-items: center; gap: 3px; position: absolute; z-index: 5">
            <button
            style="position: absolute;margin: 5px;border-radius: 42px;cursor: pointer;font-size: 15px;top: -20px;right: -20px;padding: 3px 8px;border: 2px solid wheat;box-shadow: rgb(188, 119, 45) 0px 2px 1px 1px;background: rgb(145 16 134);color: white;font-weight: bold;transform: scale(1); z-index: 6;"
            onmouseover="this.style.background='#ea3e3e'; this.style.transform='scale(1.05)';"
            onmouseout="this.style.background='rgb(145 16 134)'; this.style.transform='scale(1)';"
            onclick="openBag()">x</button>

            <!-- Div tủ đồ -->
            <div id="inventoryPages"
                style="max-width: 360px;min-width: 360px;height: 270px;padding: 10px;background: rgb(219 73 73);border-radius: 10px;z-index: 5;color: white;position: relative;display: flex;flex-direction: column;justify-content: flex-start;align-items: center;border: 4px solid #ecc123;box-shadow: rgb(144 13 13) 1px 2px 1px 2px;">
        
                <div
                    style="background: #c92525;position: absolute;top: -20px;width: 200px;height: 18px;display: flex;color: #ffe200;font-size: 15px;font-weight: bold;border-radius: 5px;border: 3px solid #fb464682;box-shadow: rgb(178 34 34) 1px 2px 1px 2px;justify-content: center;align-items: center;outline: 2px solid #fbde00cf;text-shadow: 1px 2px 1px #921919;padding: 2px 2px;">
                    TỦ ĐỒ</div>
        
                <div 
                    style="padding: 5px;background: #ffc33a;border-radius: 8px;display: flex;flex-direction: row;justify-content: space-around;align-items: center;margin-top: 12px;position: relative;border: 2px solid wheat;box-shadow: rgb(119 38 38 / 81%) 1px 1px 1px 1px;width: 100%;">
        
                    <div
                        style="position: absolute;top: -10px;display: flex;flex-direction: row;justify-content: center;align-items: center;gap: 3px;width: 100%;">
                        <span id="buttonSSR"
                            style="color: rgb(255, 255, 255);font-size: 13px;font-weight: bold;background: rgb(222 109 62);padding: 2px;border-radius: 5px;min-width: 30px;border: 2px solid rgb(119, 38, 38);box-shadow: rgba(50, 50, 50, 0.53) 1px 1px 1px 1px;transform: scale(1);cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.1)';" onmouseout="this.style.transform='scale(1)';"
                            onclick="chosenSortBagLeft('SSR', 'buttonSSR')">SSR</span>
                        <span id="buttonSS"
                            style="color: rgb(255, 255, 255); font-size: 13px; font-weight: bold; background: rgb(222, 109, 62); padding: 2px; border-radius: 5px; min-width: 30px; border: 2px solid rgb(119, 38, 38); box-shadow: rgba(50, 50, 50, 0.53) 1px 1px 1px 1px; transform: scale(1); cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.1)';" onmouseout="this.style.transform='scale(1)';"
                            onclick="chosenSortBagLeft('SS', 'buttonSS')">SS</span>
                        <span id="buttonS"
                            style="color: rgb(255, 255, 255); font-size: 13px; font-weight: bold; background: rgb(222, 109, 62); padding: 2px; border-radius: 5px; min-width: 30px; border: 2px solid rgb(119, 38, 38); box-shadow: rgba(50, 50, 50, 0.53) 1px 1px 1px 1px; transform: scale(1); cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.1)';" onmouseout="this.style.transform='scale(1)';"
                            onclick="chosenSortBagLeft('S', 'buttonS')">S</span>
                        <span id="buttonA"
                            style="color: rgb(255, 255, 255);font-size: 13px;font-weight: bold;background: rgb(222 109 62);padding: 2px;border-radius: 5px;min-width: 30px;border: 2px solid rgb(119, 38, 38);box-shadow: rgba(50, 50, 50, 0.53) 1px 1px 1px 1px;transform: scale(1);cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.1)';" onmouseout="this.style.transform='scale(1)';"
                            onclick="chosenSortBagLeft('A', 'buttonA')">A</span>
                        <span id="buttonB"
                            style="color: rgb(255, 255, 255); font-size: 13px; font-weight: bold; background: rgb(222, 109, 62); padding: 2px; border-radius: 5px; min-width: 30px; border: 2px solid rgb(119, 38, 38); box-shadow: rgba(50, 50, 50, 0.53) 1px 1px 1px 1px; transform: scale(1); cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.1)';" onmouseout="this.style.transform='scale(1)';"
                            onclick="chosenSortBagLeft('B', 'buttonB')">B</span>
                        <span id="buttonC"
                            style="color: rgb(255, 255, 255); font-size: 13px; font-weight: bold; background: rgb(222, 109, 62); padding: 2px; border-radius: 5px; min-width: 30px; border: 2px solid rgb(119, 38, 38); box-shadow: rgba(50, 50, 50, 0.53) 1px 1px 1px 1px; transform: scale(1); cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.1)';" onmouseout="this.style.transform='scale(1)';"
                            onclick="chosenSortBagLeft('C', 'buttonC')">C</span>
                        <span id="buttonD"
                            style="color: rgb(255, 255, 255); font-size: 13px; font-weight: bold; background: rgb(222, 109, 62); padding: 2px; border-radius: 5px; min-width: 30px; border: 2px solid rgb(119, 38, 38); box-shadow: rgba(50, 50, 50, 0.53) 1px 1px 1px 1px; transform: scale(1); cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.1)';" onmouseout="this.style.transform='scale(1)';"
                            onclick="chosenSortBagLeft('D', 'buttonD')">D</span>
                        <span id="buttonAll"
                            style="color: rgb(255, 255, 255); font-size: 13px; font-weight: bold; background: rgb(222, 109, 62); padding: 2px; border-radius: 5px; min-width: 30px; border: 2px solid rgb(119, 38, 38); box-shadow: rgba(50, 50, 50, 0.53) 1px 1px 1px 1px; transform: scale(1); cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.1)';" onmouseout="this.style.transform='scale(1)';"
                            onclick="chosenSortBagLeft('All', 'buttonAll')">All</span>
                    </div>
        
                    <div
                        style="display: flex;flex-direction: column;font-size: 12px;color: black;height: 250px; width: 100%;align-items: center; justify-content: flex-start;">
        
                        <!-- Thanh đầy tủ đồ phải-->
                        <div
                            style="display: flex;flex-direction: row;align-content: center;width: 100%;align-items: center;gap: 5px;justify-content: space-around; margin-top: 10px; margin-bottom: 4px;">
                            <div
                                style="display: flex;flex-direction: row;width: 100%;align-content: center;justify-content: center;align-items: center;">
        
                                <div style="display: flex;flex-direction: column;width: 100%;">
                                    <div
                                        style="width: 100%;height: 10px;background: #00000059;border-radius: 5px;overflow: hidden;">
                                        <div id="weightBagLeft" style="width: 50%;height: 100%;background: #30a8a1;">
                                        </div>
                                    </div>
                                </div>
        
                                <div id="weightBagLeftText"
                                    style="width: 15%;position: absolute;font-size: 11px;font-weight: bold;color: white;">
                                    (40/40)
                                </div>
                            </div>
                            <button id="upWeightBag"
                                style="border-radius: 42px;cursor: pointer;font-size: 10px;padding: 1px 3px;border: 2px solid wheat;box-shadow: rgba(10, 10, 10, 0.32) 0px 2px 1px 1px;background:rgb(13 33 185);color: white;font-weight: bold;transform: scale(1);"
                                onmouseover="this.style.background='#ea3e3e'; this.style.transform='scale(1.1)';"
                                onmouseout="this.style.background='rgb(13 33 185)'; this.style.transform='scale(1)';"
                                onclick="showUpWeightBag()">+</button>
                        </div>
        
                        <!-- Vùng tủ đồ -->
                        <div id="boardBagLeft" style="display: flex;flex-direction: row;background-color: #ffffff24;border-radius: 10px;width: 100%;
                                height: 100%;overflow-x: auto;flex-wrap: wrap;justify-content: center;align-content: flex-start;gap: 20px;
                                padding: 15px 0px;align-items: flex-start;">
        
                        </div>
        
                    </div>
                </div>
            </div>
        
            <!-- Div hành lý -->
            <div id="bagPages"
                style="max-width: 270px;min-width: 270px;height: 270px;padding: 10px;background: rgb(219 73 73);border-radius: 10px;z-index: 5;color: white;position: relative;display: flex;flex-direction: column;justify-content: flex-start;align-items: center;border: 4px solid #ecc123;box-shadow: rgb(145 15 14) 1px 2px 1px 2px;">
        
                <div
                    style="background: #c92525;position: absolute;top: -20px;width: 150px;height: 18px;display: flex;color: #ffe200;font-size: 15px;font-weight: bold;border-radius: 5px;border: 3px solid #fb464682;box-shadow: rgb(178 34 34) 1px 2px 1px 2px;justify-content: center;align-items: center;outline: 2px solid #fbd300cf;text-shadow: 1px 2px 1px #921919;padding: 2px 2px;">
                    HÀNH LÝ</div>
        
                <div style=" padding: 5px; background: #ffc33a;  border-radius: 8px; display: flex; flex-direction: row;
                    justify-content: space-around; align-items: center; margin-top: 12px; position: relative; border: 2px solid wheat;
                    box-shadow: rgb(119 38 38 / 81%) 1px 1px 1px 1px; width: 100%;">
        
                    <div style="position: absolute;top: -10px;display: flex;flex-direction: row;justify-content: center;
                                align-items: center;gap: 3px;width: 100%;">
                        <span id="buttonTypeConquest"
                            style="color: rgb(255, 255, 255);font-size: 13px;font-weight: bold;background: rgb(222 109 62);padding: 2px;border-radius: 5px;min-width: 30px;border: 2px solid rgb(119, 38, 38);box-shadow: rgba(50, 50, 50, 0.53) 1px 1px 1px 1px;transform: scale(1);cursor: pointer;"
                            onmouseover="this.style.transform='scale(1.1)';" onmouseout="this.style.transform='scale(1)';"
                            onclick="">Chinh phục (Xếp hạng)</span>
                    </div>
        
                    <div style="display: flex;flex-direction: column;font-size: 12px;color: black;height: 250px; width: 100%;
                                align-items: center; justify-content: flex-start;">
        
                        <!-- Thanh đầy tủ đồ phải-->
                        <div style="
                                    display: flex;
                                    flex-direction: row;
                                    align-content: center;
                                    width: 100%;
                                    align-items: center;
                                    gap: 5px;
                                    justify-content: space-around;
                                    margin-top: 15px;
                                    margin-bottom: 4px;
                                    ">
                            <div
                                style="display: flex;flex-direction: row;width: 100%;align-content: center;justify-content: center;align-items: center;">
        
                                <div style="display: flex;flex-direction: column;width: 100%;">
                                    <div
                                        style="width: 100%;height: 10px;background: #00000059;border-radius: 5px;overflow: hidden;">
                                        <div id="weightBagRight" style="width: 50%;height: 100%;background: #30a8a1;">
                                        </div>
                                    </div>
                                </div>
        
                                <div id="weightBagRightText"
                                    style="width: 15%;position: absolute;font-size: 11px;font-weight: bold;color: white;">
                                    (40/40)
                                </div>
                            </div>
        
                        </div>
        
                        <!-- Vùng tủ đồ -->
                        <div id="boardBagRight" style="display: flex;flex-direction: row;background-color: #ffffff24;border-radius: 10px;width: 100%;
                                                    height: 100%;overflow-x: auto;flex-wrap: wrap;justify-content: center;align-content: flex-start;gap: 20px;
                                                    padding: 15px 0px;align-items: flex-start;">
        
                        </div>
        
                    </div>
                </div>
            </div>
            
        </div>
        <div id="overlayPopupBag"
            style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #00000000; z-index: 4;">
        </div>

        <!--  popup Shop new  -->
        <div id="popupShop" style="display: flex; justify-content: center; align-items: center; width: 100%; 
            height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 997; position: absolute;">
            <div style=" flex-direction: column;justify-content: center;align-items: center; width: 400px; 
                background: #8d5a1f; border: 4px solid #e0a35c; border-radius: 15px; 
                box-shadow: 2px 2px 2px 2px #672722; padding: 5px; padding-top: 20px; position: relative;">
                <button style="position: absolute; margin: 5px; border-radius: 42px; cursor: pointer; font-size: 15px; top: -20px; 
                    right: -20px; padding: 3px 8px; border: 2px solid wheat; box-shadow: rgb(103 39 34) 0px 2px 1px 1px; 
                    background: rgb(98 15 15); color: white; font-weight: bold; transform: scale(1.05); z-index: 6;" 
                    onmouseover="this.style.background='#ea3e3e'; this.style.transform='scale(1.05)';" 
                    onmouseout="this.style.background='rgb(98 15 15)'; this.style.transform='scale(1)';" 
                    onclick="">x
                </button>
    
                <div style="
                    background: #623c0f;
                    position: absolute;
                    top: -20px;
                    width: 150px;
                    height: 18px;
                    display: flex;
                    color: #f9d66a;
                    font-size: 15px;
                    font-weight: bold;
                    border-radius: 5px;
                    border: 3px solid #bf80354a;
                    box-shadow: rgb(100 55 46) 1px 2px 1px 2px;
                    justify-content: center;
                    align-items: center;
                    outline: 2px solid #e0a35c;
                    text-shadow: 1px 2px 1px #4a3113;
                    padding: 2px 2px;
                    ">
                        CỬA HÀNG
                </div>
                
                <!-- Tabs -->
                <div style="display: flex; justify-content: space-around; width: 98%;">
                  <div id="tabGacha" onclick="switchTab('gacha')" 
                      style="flex: 1; text-align: center; padding: 5px; 
                      border-radius: 12px 12px 0 0; font-weight: bold; cursor: pointer; background: #ffe0b2;">
                      Quay
                  </div>
                  <div id="tabShop" onclick="switchTab('shop')" 
                      style="flex: 1; text-align: center; padding: 5px; 
                      border-radius: 12px 12px 0 0; font-weight: bold; cursor: pointer; background: #ffcc80;">
                      Mua sắm
                  </div>
                  <div id="tabExchange" onclick="switchTab('exchange')" 
                      style="flex: 1; text-align: center; padding: 5px; 
                      border-radius: 12px 12px 0 0; font-weight: bold; cursor: pointer; background: #ffe0b2;">
                      Đổi
                  </div>
                </div>
                
                <!-- Nội dung tab -->
                <div id="tabContent" style=" display: flex;
                        flex-direction: column;
                        flex-wrap: wrap;
                        align-content: center;
                        justify-content: flex-start;
                        align-items: center;
                        height: 210px;
                        overflow-y: auto;
                        overflow-x: hidden;
                        width: 94.2%;
                        background: #ffe0b2;
                        padding: 3px;
                        border-radius: 10px;
                        border-top-left-radius: 0px;
                        border-top-right-radius: 0px;
                        border: 5px solid #ffffff00;">
            
                  <!-- SHOP -->
                  <div id="shop" style="width: 100%; padding: 5px;">
                    <div id="shopPage" style="display: flex;
                        flex-flow: column wrap;
                        align-items: center;">
                        <!-- Hàng 1 -->
                        <div id="shopRow1" style="display: flex;
                          flex-direction: row;
                          border-radius: 10px;
                          gap: 20px;
                          border: 5px solid #ff000000;
                          flex-wrap: wrap;
                          justify-content: center;
                          align-content: center;">

                            <div id="I0003" style="min-width: 145px; height: 145px; padding: 2px; 
                                background: url(&quot;https://res.cloudinary.com/dxgawkr4g/image/upload/v1730731024/0005.png&quot;) 0% 0% / cover; 
                                border-radius: 10px; text-align: center; display: flex; flex-direction: column; align-items: center; 
                                box-shadow: rgb(191, 130, 63) 1px 2px 3px 2px; justify-content: center; border: 4px solid firebrick; 
                                position: relative;"><p style="font-size: 12px; font-weight: bold; margin: 1px 0px 0px; color: white; 
                                background: firebrick; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; 
                                width: 155px; pointer-events: none; position: absolute; bottom: -4px; display: flex; align-items: center; 
                                justify-content: center; height: 20px;">Gói 200 vàng</p>
                            </div>
                            
                        </div>
                    </div>

                  </div>
            
                  <!-- Gacha -->
                  <div id="gacha" style="display: none; text-align: center; padding: 20px;">
                    <h3 style="color: #6a1b9a;">✨ Gacha Time!</h3>
                    <p>Quay để nhận vật phẩm hiếm!</p>
                    <button style="background: #d1c4e9; border: none; padding: 8px 20px; border-radius: 10px; font-weight: bold; color: #4a148c;">Gacha 300 🪙</button>
                  </div>
            
                  <!-- Đổi -->
                  <div id="exchange" style="display: none; text-align: center; padding: 20px;">
                    <h3 style="color: #2e7d32;">🎁 Đổi quà</h3>
                    <p>Sử dụng điểm để đổi vật phẩm đặc biệt</p>
                    <button style="background: #c8e6c9; border: none; padding: 8px 20px; border-radius: 10px; font-weight: bold; color: #1b5e20;">Xem Quà</button>
                  </div>
            
                </div>
              </div>
        </div>
        
        <!-- Popup hiển thị 5Mon gặp phải -->
        <div id="popupMeet5Mon" style="display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgb(240, 226, 201);
            padding: 10px;
            border-radius: 10px;
            box-shadow: rgb(0 0 0 / 20%) 0px 4px 6px;
            text-align: center;
            z-index: 1000;
            min-width: 250px;">

            <div style="display: flex; flex-direction: row; gap: 10px; position: relative;">
                <img id="imgPopupSTT5MonMeet" src=""
                    style="height: 250px; object-fit: cover; border-radius: 10px; border: 2px solid rebeccapurple;">
                <div id="rareColorPopupSTT5MonMeet"
                    style="position: absolute;font-size: 25px;font-weight: bold; color: rgb(83, 21, 21); text-shadow: 2px 1px 2px #140a03; top: 12px; left: 164px;">
                    <span id="rareTextPopupSTT5MonMeet"
                        style="position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);font-size: 14px;color: #ffd600; font-weight: bold; background: #ff0000;min-width: 25px; border-radius: 5px;">2</span>
                </div>
        
                <div
                    style="display: flex; flex-direction: column; min-width: 300px; align-items: center; justify-content: flex-start;">
                    <h3 id="namePopupSTT5MonMeet" style="margin: 0;
                        margin-top: 2px;
                        font-weight: bold;
                        color: white;
                        background: firebrick;
                        border-bottom-right-radius: 10px;
                        border-bottom-left-radius: 10px;
                        pointer-events: none;
                        width: 100%">
                    </h3>
                    <div id=""
                        style="position: absolute;font-size: 25px;font-weight: bold;color: rgb(83, 21, 21);text-shadow: 2px 1px 2px #140a03;top: 3px;right: -180px;width: 100%;">
                        <span id="allStats5MonMeet"
                            style="position: absolute;font-size: 14px;color: #ffd600;font-weight: bold;border-radius: 5px;">⚔️:
                            206</span>
                    </div>
                    <p id="descPopupSTT5MonMeet" style="background: #fff3dc;
                        margin: 0px;
                        border: 6px solid #ff000000;
                        margin-top: 5px;
                        border-radius: 10px;
                        font-size: 12px;
                        min-height: 170px;
                        max-height: 170px;
                        max-width: 300px;
                        width: 95%;
                        overflow: auto;
                        display: flex;
                        flex-direction: column;
                        align-items: flex-start;
                        text-align: left;
                        font-weight: normal;
                        gap: 3px;
                        box-shadow: rgb(175 124 81 / 67%) 1px 2px 3px 2px;
                        color: rebeccapurple;">
                    </p>

                    <div style="width: 96%; height: 30px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;
                    align-content: center;margin-top: 10px;">
                        <span id="percentCatch5MonMeet" style="padding: 4px 10px; color: wheat;  background: rebeccapurple; border-radius: 8px; font-size: 14px;">
                            Tỷ lệ: 100%
                        </span>
                        <div style="display: flex; flex-direction: row; gap: 4px;">
                            <button
                                style="font-weight: bold; padding: 5px 10px; background: rgb(76, 127, 175); color: white; border-radius: 5px; 
                                cursor: pointer; transition: background-color 0.3s; border: 2px solid rgba(255, 255, 255, 0.17); 
                                box-shadow: #0000009a 1px 1px 1px 1px; transform: scale(1);"
                                onmouseover="this.style.background='rgb(40 179 84)'; this.style.transform='scale(1.05)';"
                                onmouseout="this.style.background='rgb(76, 127, 175)'; this.style.transform='scale(1)';" onclick="closePopupMeet5Mon()">
                                Bỏ qua
                            </button>

                            <button
                                style="font-weight: bold; padding: 5px 10px; background: rgb(175, 76, 76); color: white; border-radius: 5px; 
                                cursor: pointer; transition: background-color 0.3s; border: 2px solid rgba(255, 255, 255, 0.17); 
                                box-shadow:  #0000009a 1px 1px 1px 1px; transform: scale(1);"
                                onmouseover="this.style.background='rgb(40 179 84)'; this.style.transform='scale(1.05)';"
                                onmouseout="this.style.background='rgb(175, 76, 76)'; this.style.transform='scale(1)';" onclick="catch5MonMeet()">
                                Bắt lấy
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Màn hình trận đấu -->
        <div id="battleScreen" style="
      display: none;
      flex-direction: column;
      align-items: center;
      background: radial-gradient(circle, rgb(130 194 183), rgb(113, 164, 155));
      color: rgb(255, 255, 255);
      margin: auto;
      min-height: 70%;
      min-width: 95%;
      justify-content: center;
      padding: 10px;
      padding-top: 10px;
      padding-bottom: 10px;
      border: 5px solid wheat;
      border-radius: 20px;
      box-shadow: 0px 0px 15px rgb(68 57 32 / 84%);
      ">
            <div style="width: 30px;height: 30px;border-radius: 5px;color: black;background: wheat;position: absolute;top: -22px;left: 40px;
              font-size: 20px;font-weight: bold;display: flex;flex-direction: column;align-content: center;justify-content: center;
              align-items: center;text-align: center;cursor: pointer;"
                onclick="openFullscreen()">
                [ ]
            </div>
            <!-- Vùng Top (Đối thủ + Shop) -->
            <div style="display: flex;flex-direction: column;min-width: 70%;">
                <!-- Vùng đối thủ -->
                <div id="compZone"
                    style="gap: 10px; display: flex; flex-direction: row; justify-content: center;align-items: center;background: rgb(211, 148, 148); border-radius: 15px; padding: 15px; box-shadow: rgb(149 98 98) 0px 5px 1px;outline: 1px solid #00000040;">
                    <!-- Hình ảnh -->
                    <div id="localtionA"
                        style="display: flex; flex-direction: row; justify-content: center; align-items: center;">
                        <div id="imageContainerComp" class="imageContainer comp"
                            style="position: relative;display: flex;text-align: center;align-content: center;justify-content: center;align-items: center;">
                            <img id="TeamA" style="border: 4px solid #00000035;"
                                src="https://res.cloudinary.com/dxgawkr4g/image/upload/v1730731024/0005.png" alt="A">
                            <!-- Dòng chữ Đối thủ -->
                            <div id="textNameComp"
                                style="position: absolute;bottom: -3px;width: 115%;padding-top: 3px;padding-bottom: 3px;  text-align: center;font-size: 15px;font-weight: bold;color: white;background: firebrick; clip-path: polygon(10% 0%, 90% 0%, 100% 50%, 90% 100%, 10% 100%, 0% 50%);">
                                Đối thủ
                            </div>
                        </div>
                    </div>

                    <!-- vùng skill + hpbar -->
                    <div>
                        <div style="display: flex; flex-direction: column">
                            <!-- Vùng cooldown -->
                            <div
                                style="display: flex; flex-direction: row; justify-content: flex-start; align-items: center; gap: 16px;">
                                <div id="cooldownSkillA"
                                    style="width: 87%; height: 6px; background-color: rgb(0 0 0 / 25%); position: relative; overflow: hidden; border-radius: 5px;">
                                    <div id="cooldownBarSkillA"
                                        style="width: 100%; height: 100%; background-color: #366058; transition: width 0.2s linear;">
                                        <!-- Các phần chia -->
                                        <div class="divider"
                                            style="position: absolute; height: 100%; width: 5px; left: 6.25%; background-color: cyan;">
                                        </div>
                                        <div class="divider"
                                            style="position: absolute; height: 100%; width: 5px; left: 18.75%; background-color: cyan;">
                                        </div>
                                        <div class="divider"
                                            style="position: absolute; height: 100%; width: 5px; left: 31.25%; background-color: cyan;">
                                        </div>
                                        <div class="divider"
                                            style="position: absolute; height: 100%; width: 5px; left: 43.75%; background-color: cyan;">
                                        </div>
                                        <div class="divider"
                                            style="position: absolute; height: 100%; width: 5px; left: 56.25%; background-color: cyan;">
                                        </div>
                                        <div class="divider"
                                            style="position: absolute; height: 100%; width: 5px; left: 68.75%; background-color: cyan;">
                                        </div>
                                        <div class="divider"
                                            style="position: absolute; height: 100%; width: 5px; left: 81.25%; background-color: cyan;">
                                        </div>
                                        <div class="divider"
                                            style="position: absolute; height: 100%; width: 5px; left: 93.75%; background-color: cyan;">
                                        </div>
                                    </div>
                                </div>
                                <div
                                    style="font-size: 10px; font-weight: bold; color: white;position: absolute;left: 51%;">
                                    <span id="cooldownTimeSkillA"
                                        style="padding-left: 5px; padding-right: 5px; border-radius: 5px;"></span>
                                    <span id="cooldownSpeedUpTimeSkillA"
                                        style="padding-left: 5px; padding-right: 5px; border-radius: 5px;"></span>
                                </div>
                                <span style="width: 10%;font-size: 10px; font-weight: bold ;color: white;">Linh
                                    thú</span>
                            </div>
                            <div class="skillBar skillBarA">
                                <div id="skillBarA"
                                    style="display: flex; flex-direction: row; flex-wrap: nowrap; align-items: center; justify-content: space-between; gap: 10px;">
                                    <div id="skill1A" class="slotSkillComp">
                                        <div class="skillCooldownOverlay"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                    <div id="skill2A" class="slotSkillComp">
                                        <div class="skillCooldownOverlay"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                    <div id="skill3A" class="slotSkillComp">
                                        <div class="skillCooldownOverlay"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                    <div id="skill4A" class="slotSkillComp">
                                        <div class="skillCooldownOverlay"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                    <div id="skill5A" class="slotSkillComp">
                                        <div class="skillCooldownOverlay"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                    <div id="skill6A" class="slotSkillComp">
                                        <div class="skillCooldownOverlay"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                    <div id="skill7A" class="slotSkillComp">
                                        <div class="skillCooldownOverlay"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                    <div id="skill8A" class="slotSkillComp">
                                        <div class="skillCooldownOverlay"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                    <a></a>
                                    <div id="skill9A" class="slotSkillComp" style="border: solid 0.5px white;">
                                        <div class="skillCooldownOverlayLV"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Phần Effect và HP Bên A -->
                        <div
                            style="width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; margin-top: 5px;">
                            <div id="effectContainerA" class="effectContainer"></div>
                            <div class="hpBar" id="hpBarA">
                                <div class="sttTeam">
                                    <div class="hpText"></div>
                                    <div class="shieldText"></div>
                                    <div class="burnText"></div>
                                    <div class="poisonText"></div>
                                </div>
                                <div class="shieldFill" style="width: 0%;"></div>
                                <div class="hpFill" style="width: 100%;"></div>
                            </div>
                        </div>


                    </div>
                </div>




                <!-- Vùng shop -->
                <div id="shopZone"
                    style="display: flex; height: 132px; flex-direction: row; align-items: center; gap: 10px; justify-content: center;background: #74b390; border-radius: 15px; padding-right: 15px; padding-left: 15px;     box-shadow: rgb(0 0 0 / 30%) 0px 5px 1px; outline: 1px solid #00000040;">
                    <div id="shopSell"
                        style="width: 60px; height: 76px; padding: 10px; background: #f86e85; border-radius: 10px; box-shadow: 0px 1px 3px rgb(68 57 32 / 84%);"
                        onclick="messageOpen('Kéo 5Mon của bạn vào đây')">
                        Thả 5Mon
                    </div>

                    <div>
                        <div id="battleShop">
                            <div
                                style="background: #d98c39;position: absolute;top: -15px;left: 10px;display: flex;color: white;font-size: 16px;font-weight: bold;border-radius: 10px;border: 2px solid #fabb78;box-shadow: rgb(177 112 42) 1px 1px 1px 1px;justify-content: center;align-items: center;text-shadow: 1px 2px 1px #835016;padding: 2px 10px;">
                                5Mon hoang dã</div>

                            <div
                                style="color: #cd3b54;font-weight: bold;display: flex;flex-direction: column;align-content: center;justify-content: center;align-items: center;margin-top: 15px; position: relative">
                                Để bắt 5Mon bạn cần
                                <div
                                    style="position: absolute;font-size: 25px;font-weight: bold;color: #0769d8;text-shadow: 0px 1px 2px #0000008a;display: inline-block;margin-top: 50px;">
                                    <i class="fa-solid fa-splotch"></i>
                                    <span id="battleShopText"
                                        style="position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);font-size: 13px;color: white;font-weight: bold;">1</span>
                                </div>
                            </div>

                            <div id="battleShop1" class="slotSkillShop">
                            </div>
                            <div id="battleShop2" class="slotSkillShop">
                            </div>
                            <div id="battleShop3" class="slotSkillShop">
                            </div>
                            <div id="battleShop4" class="slotSkillShop">
                                <!-- <div id="ITEM4" style="background-image: url('https://res.cloudinary.com/dxgawkr4g/image/upload/v1731138498/Gate-5Mon-1.png');" class="skill" draggable="true" data-skill='{"ID": "A0004", "LEVEL": 4, "own": false}'></div> -->
                            </div>
                        </div>
                    </div>

                    <button id="resetShop" active="false"
                        style="width: 60px;height: 76px;padding: 10px;background: #b4ce4f;border-radius: 10px;font-weight: bold;border: 2px solid #5b817a;box-shadow: 0px 1px 3px rgb(68 57 32 / 84%);position: relative;display: flex;flex-direction: row;align-content: center;justify-content: center;align-items: center;"
                        onclick="reRollShop()">
                        Làm mới
                        <div
                            style="position: absolute;font-size: 20px;font-weight: bold;color: #0769d8;text-shadow: 0px 1px 2px #0000008a;top: -9px;right: -10px;">
                            <i class="fa-solid fa-splotch"></i>
                            <span id="qtyResetShop"
                                style="position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);font-size: 12px;color: white;font-weight: bold;">0</span>
                        </div>
                    </button>
                </div>


            </div>

            <!-- Vùng Mid (Tủ đồ + Thanh đếm ngược) -->
            <div style="display:flex; flex-direction: column; min-width:70%">
                <div
                    style="gap: 10px; display: flex; flex-direction: row; justify-content: center; align-items: center; border-radius: 15px;">

                    <!-- Tủ đồ -->
                    <div id="inventoryZone"
                        style="display: flex; flex-direction: row; align-content: center; align-items: center; gap: 15px;border-radius: 15px;align-items: center; justify-content: center; padding-left: 17px; padding-right: 17px; padding-top: 5px; padding-bottom: 5px; background: rgb(199 170 141); box-shadow: rgb(0 0 0 / 30%) 0px 5px 1px; width: 100%; outline: 1px solid #00000040;">
                        <div>
                            <div id="battleInventory"> Hành<br>lý
                                <div id="battleInv1" class="slotSkill">
                                </div>
                                <div id="battleInv2" class="slotSkill">
                                </div>
                                <div id="battleInv3" class="slotSkill">
                                </div>
                                <div id="battleInv4" class="slotSkill">
                                </div>
                                <div id="battleInv5" class="slotSkill">
                                </div>
                                <div id="battleInv6" class="slotSkill">
                                </div>
                                <div id="battleInv7" class="slotSkill">
                                </div>
                                <div id="battleInv8" class="slotSkill">
                                </div>
                                <div id="battleInv9" class="slotSkill">
                                </div>
                            </div>
                        </div>
                        <div style="
                background: #f1e8ad;
                border-radius: 10px;
                padding: 5px;
                align-items: center;
                gap: 10px;
                ">
                            <button id="nextStepGame" style="
                    background: #f86e85;
                    border-radius: 5px;
                    width: 65px;
                    height: 76px;
                    background-size: cover;
                    background-position: center;
                    background-repeat: no-repeat;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: #ffffff;
                    font-weight: bold;
                    position: relative;
                    border: 2px solid #5b817a00;
                    box-shadow: 0px 1px 3px rgb(68 57 32 / 84%);" onclick="nextStepGame1()">Tiếp tục
                            </button>
                        </div>
                    </div>
                    <!-- Thanh đếm ngược trận đấu -->
                    <div id="timeZone"
                        style="display: flex; flex-direction: row; align-content: center; align-items: center; border-radius: 15px;justify-content: center;">
                        <div id="battleTime"
                            style="height: 76px; width: 840px ;display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 5px;">
                            <!-- Đoạn thêm vào -->
                            <div id="cooldownBarContainer"
                                style="width: 770px; height: 13px; background-color: #00000055; position: relative; overflow: hidden; border-radius: 5px; clip-path: polygon(2% 0%, 98% 0%, 100% 50%, 98% 100%, 2% 100%, 0% 50%);">
                                <div id="cooldownBar"
                                    style="width: 100%; height: 100%; background: linear-gradient(to right, rgb(116, 4, 4), rgb(255, 12, 12)); transition: width 0.2s linear;">
                                </div>
                            </div>
                            <span id="cooldownTime"
                                style="font-size: 14px; color: white; margin-top: -15px; z-index: 1; padding-left: 5px; padding-right: 5px;  background: green; border-radius: 5px;">30s</span>
                        </div>
                    </div>
                </div>
            </div>



            <!-- Vùng Bottom (Thông tin của người chơi) -->
            <div style="display: flex; flex-direction: column; min-width: 70%; position: relative">
                <div
                    style="display: flex;flex-direction: column;font-family: Arial, sans-serif;position: absolute;z-index: 1; right: 5px; bottom: 5px;">
                    <!-- Nút setting trong battle -->
                    <i class="fa-solid fa-gear setting-button" onclick="openPopupSetting()"></i>
                </div>

                <!-- Hình ảnh Bên B - Mình -->
                <div
                    style="gap: 10px; display: flex; flex-direction: row; justify-content: center; align-items: center; background: rgb(139 185 120); border-radius: 15px; padding: 15px; box-shadow: rgb(0 0 0 / 30%) 0px 5px 1px; outline: 1px solid #00000040;">
                    <div id="localtionB"
                        style="display: flex; flex-direction: row; justify-content: center; align-items: center;">
                        <div id="imageContainerUser" class="imageContainer user"
                            style="position: relative;display: flex;text-align: center;align-content: center;justify-content: center;align-items: center;">
                            <img id="TeamB" style="border: 4px solid #00000035;"
                                src="https://res.cloudinary.com/dxgawkr4g/image/upload/v1730731024/0005.png" alt="A">

                            <!-- Thông tin star /  -->
                            <div style="position:absolute;right: -10px;top: 15%;font-size: 25px;font-weight: bold;color: #0769d8;text-shadow: 0px 1px 2px #0000008a;display: inline-block;"
                                onclick="messageOpen('Đây là sao, dùng để bắt 5Mon và làm mới 5Mon tại vùng 5Mon hoang dã')">
                                <i class="fa-solid fa-splotch"></i>
                                <span id="starUser"
                                    style="position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);font-size: 13px;color: white;font-weight: bold;">
                                    3
                                </span>
                            </div>

                            <!-- Dòng chữ Đối thủ -->
                            <div
                                style="position: absolute;top: -3px; width: 115%;padding-top: 3px;padding-bottom: 3px;  text-align: center;font-size: 15px;font-weight: bold;color: white;background: #dcaa15;clip-path: polygon(10% 0%, 90% 0%, 100% 50%, 90% 100%, 10% 100%, 0% 50%);">
                                Bạn
                            </div>
                            <div id="hpUserBar" class="hpBar" style="position: absolute; bottom: 0px; height: 15px;">
                                <div id="hpUser" class="hpFill" style="width: 100%;"></div>
                                <div id="hpUserText"
                                    style="position: absolute;font-size: 12px;top: 0px;left: 18%; font-weight: bold;">
                                    <span>Win/lose: </span><span id="hpUserWinOrLose">0/0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="display: flex; flex-direction: column; justify-content: space-evenly;">
                        <!-- Phần Effect và HP Bên B -->
                        <div
                            style="width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; margin-bottom: 5px;">
                            <div id="effectContainerB" class="effectContainer"></div>
                            <div class="hpBar" id="hpBarB">
                                <div class="sttTeam">
                                    <div class="hpText"></div>
                                    <div class="shieldText"></div>
                                    <div class="burnText"></div>
                                    <div class="poisonText"></div>
                                </div>
                                <div class="shieldFill" style="width: 0%;"></div>
                                <div class="hpFill" style="width: 100%;"></div>
                            </div>
                        </div>


                        <div style="display: flex; flex-direction: column;">
                            <div class="skillBar skillBarB">
                                <div id="skillBarB"
                                    style="display: flex; flex-direction: row; flex-wrap: nowrap; align-items: center; justify-content: space-between; gap: 10px;">
                                    <div id="skill1B" class="slotSkill">
                                        <div class="skillCooldownOverlay"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                    <div id="skill2B" class="slotSkill">
                                        <div class="skillCooldownOverlay"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                    <div id="skill3B" class="slotSkill">
                                        <div class="skillCooldownOverlay"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                    <div id="skill4B" class="slotSkill">
                                        <div class="skillCooldownOverlay"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                    <div id="skill5B" class="slotSkill">
                                        <div class="skillCooldownOverlay"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                    <div id="skill6B" class="slotSkill">
                                        <div class="skillCooldownOverlay"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                    <div id="skill7B" class="slotSkill">
                                        <div class="skillCooldownOverlay"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                    <div id="skill8B" class="slotSkill">
                                        <div class="skillCooldownOverlay"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                    <a></a>
                                    <div id="skill9B" class="slotSkill" style="border: solid 0.5px white;">
                                        <div class="skillCooldownOverlayLV"></div> <!-- Overlay hồi chiêu -->
                                    </div>
                                </div>
                            </div>
                            <div
                                style="display: flex; flex-direction: row; justify-content: flex-start; align-items: center; gap: 16px;">
                                <div id="cooldownSkillB"
                                    style="width: 87%; height: 6px; background-color: rgb(0 0 0 / 25%); position: relative; overflow: hidden; border-radius: 5px;">
                                    <div id="cooldownBarSkillB"
                                        style="width: 100%; height: 100%; background-color: #366058; transition: width 0.2s linear;">
                                        <!-- Các phần chia -->
                                        <div class="divider"
                                            style="position: absolute; height: 100%; width: 5px; left: 6.25%; background-color: cyan;">
                                        </div>
                                        <div class="divider"
                                            style="position: absolute; height: 100%; width: 5px; left: 18.75%; background-color: cyan;">
                                        </div>
                                        <div class="divider"
                                            style="position: absolute; height: 100%; width: 5px; left: 31.25%; background-color: cyan;">
                                        </div>
                                        <div class="divider"
                                            style="position: absolute; height: 100%; width: 5px; left: 43.75%; background-color: cyan;">
                                        </div>
                                        <div class="divider"
                                            style="position: absolute; height: 100%; width: 5px; left: 56.25%; background-color: cyan;">
                                        </div>
                                        <div class="divider"
                                            style="position: absolute; height: 100%; width: 5px; left: 68.75%; background-color: cyan;">
                                        </div>
                                        <div class="divider"
                                            style="position: absolute; height: 100%; width: 5px; left: 81.25%; background-color: cyan;">
                                        </div>
                                        <div class="divider"
                                            style="position: absolute; height: 100%; width: 5px; left: 93.75%; background-color: cyan;">
                                        </div>
                                    </div>
                                </div>
                                <div
                                    style="font-size: 10px; font-weight: bold; color: white;position: absolute;left: 51%;">
                                    <span id="cooldownTimeSkillB"
                                        style="padding-left: 5px; padding-right: 5px; border-radius: 5px;"></span>
                                    <span id="cooldownSpeedUpTimeSkillB"
                                        style="padding-left: 5px; padding-right: 5px; border-radius: 5px;"></span>
                                </div>
                                <span style="width: 10%;font-size: 10px; font-weight: bold ;color: white;">Linh
                                    thú</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Popup hiển thị lựa chọn nhân vật -->
    <div id="popupSelectCharacter"
        style="position: absolute;display:none; flex-direction: column; gap: 20px; width: 100%; z-index: 9999; align-items: center; align-content: center; justify-content: center; height: 50%; background: radial-gradient(#faf5b4, transparent);">
        <!-- Header -->
        <div
            style="display: flex; flex-direction: column; gap: 5px; max-width: 700px; align-content: center; align-items: center; justify-content: center; font-size: 24px; font-weight: bold; color: #f5e833; text-shadow: 3px 3px 5px rgba(0, 0, 0, 0.5);">
            <span>Chào mừng bạn đến với 5World hãy lựa chọn nhân vật và cùng khám phá 5World nào!</span>
            <span>Hãy lựa chọn nhân vật và cùng khám phá 5World nào!</span>
        </div>
        <!-- Hình ảnh lựa chọn nhân vật -->
        <div style="display: flex; flex-direction: row; gap: 30px; justify-content: center; align-items: center;">
            <!-- Nhân vật nam 1 -->
            <div id="selectCharacter1" class="comp"
                style="height: 200px; width: 200px; border-radius: 15px; background: url(https://res.cloudinary.com/dxgawkr4g/image/upload/v1730731024/0005.png); background-size: cover; background-position: center; border: 8px solid #fbedd2; cursor: pointer; "
                onclick="selectCharacterForUser('Male')"> </div>
            <!-- Nhân vật nữ 1 -->
            <div id="selectCharacter2" class="user"
                style="height: 200px; width: 200px; border-radius: 15px; background: url(https://res.cloudinary.com/dxgawkr4g/image/upload/v1730731024/0005.png); background-size: cover; background-position: center; border: 8px solid #fbedd2; cursor: pointer; "
                onclick="selectCharacterForUser('Female')"> </div>
        </div>
    </div>

    <!-- Popup hiển thị thông báo đang trong game liệu có tiếp tục game không -->
    <div id="popupContinueGame"
        style="display: none; flex-direction: column; justify-content: center; align-content: center; align-items: center; background: #C8A47E; border: 4px solid #8B5A2B; padding: 20px; border-radius: 15px; text-align: center; box-shadow: rgb(246 255 162 / 90%) 0px 0px 30px; animation: fadeIn 0.5s ease-in-out; z-index: 9999; position: absolute;">
        <span
            style="font-size: 20px; height: 30px; display: flex; justify-content: center; align-items: center; color: #922a2a; font-weight: bold; margin-bottom: 10px; width: 100%; background: radial-gradient(#ffffffa1, transparent);;">THÔNG
            BÁO</span>
        <div onclick="closePopupContinueGame()"
            style="padding: 5px; padding-left: 10px; padding-right: 10px; position: absolute; top: -15px; right: -15px; color: white; border-radius: 100px; background: #631e10; font-weight: bold; border: 4px solid #8B5A2B; cursor: pointer;"
            onmouseover="this.style.background='#ad2a0f'; this.style.transform='scale(1.05)';"
            onmouseout="this.style.background='#631e10'; this.style.transform='scale(1)';">x</div>

        <!-- Nội dung thông báo -->
        <div id="descPopupContinueGame"
            style="display: flex; flex-direction: column; width: 400px; height: 210px; background: #EAD8C0; border: 3px solid #8B5A2B; border-radius: 10px; font-size: 13px; font-weight: bold; color: #4A3B33; padding: 5px; align-items: flex-start; justify-content: flex-start; align-content: flex-start; overflow-x: auto;">
            <!-- Nội dung thêm ở đây -->
        </div>

        <!-- button tiếp tục hay bỏ cuộc -->
        <div
            style="display: flex; flex-direction: row; width: 400px; height: 35px; gap: 5px; font-size: 13px; font-weight: bold; color: black; align-content: center; align-items: center; justify-content: center; margin-top: 10px;">
            <button id="exitGameButton"
                style="width:50%; height: 100%; background: #C94F4F; border: 2px solid #B53030; border-radius: 10px; cursor: pointer; font-size: 14px; font-weight: bold; color: white; text-shadow: 0px 0px 5px rgba(255, 100, 100, 0.8); box-shadow: 0px 0px 10px rgba(201, 79, 79, 0.6);"
                onmouseover="this.style.background='#B53030'; this.style.transform='scale(1.05)';"
                onmouseout="this.style.background='#C94F4F'; this.style.transform='scale(1)';">
                Bỏ cuộc
            </button>

            <button id="continueGameButton"
                style="width: 50%; height: 100%; background: rgb(90, 191, 168); border: 2px solid rgb(58, 127, 116); border-radius: 10px; cursor: pointer; font-size: 14px; font-weight: bold; color: black; box-shadow: rgba(44, 227, 185, 0.6) 0px 0px 10px; transform: scale(1);"
                onmouseover="this.style.background='#3A7F74'; this.style.transform='scale(1.05)';"
                onmouseout="this.style.background='#5ABFA8'; this.style.transform='scale(1)';">
                ⚔️ Tiếp tục
            </button>
        </div>
    </div>


    <!-- Popup hiển thị skill battle -->
    <div id="popupSTT">
        <a id="popupNameLevel"
            style="font-weight: bold; font-size: 15px;text-align: left;display: flex; flex-direction: column;width: 100%;">Tên:
        </a>
        <a id="popupDesc0" style="font-size: 12px; font-weight: bold; margin-bottom: -5px;">[Kỹ năng]</a>
        <a id="popupDesc1"
            style="display: flex; flex-direction: column; gap: 4px;text-align: left; padding-left: 10px; margin-bottom: -5px;">Mô
            tả: </a>
        <a id="popupDesc2"
            style="display: flex; flex-direction: column; gap: 4px;text-align: left; padding-left: 10px;">Mô tả: </a>
        <a id="popupDesc3" style="display: flex; flex-direction: column; gap: 4px;text-align: left;">Mô tả: </a>
    </div>

    <!-- Popup hiển thị thông tin 5mon -->
    <div id="popupSTT5Mon" style="display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgb(240, 226, 201);
    padding: 10px;
    border-radius: 10px;
    box-shadow: rgb(0 0 0 / 20%) 0px 4px 6px;
    text-align: center;
    z-index: 1000;
    min-width: 250px;">

        <div style="display: flex; flex-direction: row; gap: 10px; position: relative;">
            <img id="imgPopupSTT5Mon" src=""
                style="height: 250px; object-fit: cover; border-radius: 10px; border: 2px solid rebeccapurple;">
            <div id="rareColorPopupSTT5Mon"
                style="position: absolute;font-size: 25px;font-weight: bold; color: rgb(83, 21, 21); text-shadow: 2px 1px 2px #140a03; top: 12px; left: 164px;">
                <span id="rareTextPopupSTT5Mon"
                    style="position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);font-size: 14px;color: #ffd600; font-weight: bold; background: #ff0000;min-width: 25px; border-radius: 5px;">2</span>
            </div>
            <div id="levelColorPopupSTT5Mon"
                style="position: absolute;font-size: 25px;font-weight: bold;color: red;text-shadow: rgba(0, 0, 0, 0.54) 0px 1px 2px;top: 20px;left: 152px;">
                <i class="fa-solid fa-diamond"></i>
                <span id="levelTextPopupSTT5Mon"
                    style="position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);font-size: 14px;color: white;font-weight: bold;">2</span>
            </div>

            <div
                style="display: flex; flex-direction: column; min-width: 300px; align-items: center; justify-content: flex-start;">
                <h3 id="namePopupSTT5Mon" style="margin: 0;
        margin-top: 2px;
        font-weight: bold;
        color: white;
        background: firebrick;
        border-bottom-right-radius: 10px;
        border-bottom-left-radius: 10px;
        pointer-events: none;
        width: 100%"></h3>
        <div id="" style="position: absolute;font-size: 25px;font-weight: bold;color: rgb(83, 21, 21);text-shadow: 2px 1px 2px #140a03;top: 3px;right: -180px;width: 100%;">
            <span id="allStats5Mon" style="position: absolute;font-size: 14px;color: #ffd600;font-weight: bold;border-radius: 5px;">⚔️: 206</span>
        </div>
            <p id="descPopupSTT5Mon" style="background: #fff3dc;
                margin: 0px;
                border: 6px solid #ff000000;
                margin-top: 5px;
                border-radius: 10px;
                font-size: 12px;
                min-height: 170px;
                max-height: 170px;
                max-width: 300px;
                width: 95%;
                overflow: auto;
                display: flex;
                flex-direction: column;
                align-items: flex-start;
                text-align: left;
                font-weight: normal;
                gap: 3px;
                box-shadow: rgb(175 124 81 / 67%) 1px 2px 3px 2px;">
            </p>
            <div style="width: 96%; height: 30px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;
                align-content: center;margin-top: 10px;">
                    <span id="IDcreate5MonPopupSTT5Mon" style="padding: 4px 10px; color: wheat;  background: rebeccapurple; border-radius: 8px; font-size: 14px;">
                        "!@#$%^*$#(*^$)"
                    </span>
                    <div style="display: flex; flex-direction: row; gap: 4px;">
                        <button id="buttonPopupSTT5Mon"
                            style="font-weight: bold; padding: 5px 20px; background: rgb(63 117 219); color: white; border-radius: 5px; 
                            cursor: pointer; transition: background-color 0.3s; border: 2px solid rgba(255, 255, 255, 0.17); 
                            box-shadow: rgb(0 0 0 / 69%) 1px 1px 1px 1px; transform: scale(1);"
                            onmouseover="this.style.background='rgb(54 157 37)'; this.style.transform='scale(1.05)';"
                            onmouseout="this.style.background='rgb(63 117 219)'; this.style.transform='scale(1)';" onclick="">
                            Thả đi
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Popup hiển thị thông tin 5mon Battle -->
    <div id="popupSTT5MonInBattle" style="display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgb(240, 226, 201);
        padding: 10px;
        border-radius: 10px;
        box-shadow: rgb(0 0 0 / 20%) 0px 4px 6px;
        text-align: center;
        z-index: 1000;
        min-width: 250px;">
    
        <div style="display: flex; flex-direction: row; gap: 10px; position: relative;">
            <img id="imgPopupSTT5MonInBattle" src=""
                style="height: 250px; object-fit: cover; border-radius: 10px; border: 2px solid rebeccapurple;">
            <div id="rareColorPopupSTT5MonInBattle"
                style="position: absolute;font-size: 25px;font-weight: bold; color: rgb(83, 21, 21); text-shadow: 2px 1px 2px #140a03; top: 12px; left: 164px;">
                <span id="rareTextPopupSTT5MonInBattle"
                    style="position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);font-size: 14px;color: #ffd600; font-weight: bold; background: #ff0000;min-width: 25px; border-radius: 5px;">2</span>
            </div>
            <div id="levelColorPopupSTT5MonInBattle"
                style="position: absolute;font-size: 25px;font-weight: bold;color: red;text-shadow: rgba(0, 0, 0, 0.54) 0px 1px 2px;top: 20px;left: 152px;">
                <i class="fa-solid fa-diamond"></i>
                <span id="levelTextPopupSTT5MonInBattle"
                    style="position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);font-size: 14px;color: white;font-weight: bold;">2</span>
            </div>
    
            <div
                style="display: flex; flex-direction: column; min-width: 300px; align-items: center; justify-content: flex-start;">
                <h3 id="namePopupSTT5MonInBattle" style="margin: 0;
            margin-top: 2px;
            font-weight: bold;
            color: white;
            background: firebrick;
            border-bottom-right-radius: 10px;
            border-bottom-left-radius: 10px;
            pointer-events: none;
            width: 100%"></h3>
                <div id=""
                    style="position: absolute;font-size: 25px;font-weight: bold;color: rgb(83, 21, 21);text-shadow: 2px 1px 2px #140a03;top: 3px;right: -180px;width: 100%;">
                    <span id="allStats5MonInBattle"
                        style="position: absolute;font-size: 14px;color: #ffd600;font-weight: bold;border-radius: 5px;">⚔️:
                        206</span>
                </div>
                <p id="descPopupSTT5MonInBattle" style="background: #fff3dc;
                    margin: 0px;
                    border: 6px solid #ff000000;
                    margin-top: 5px;
                    border-radius: 10px;
                    font-size: 12px;
                    min-height: 210px;
                    max-height: 210px;
                    max-width: 300px;
                    width: 95%;
                    overflow: auto;
                    display: flex;
                    flex-direction: column;
                    align-items: flex-start;
                    text-align: left;
                    font-weight: normal;
                    gap: 3px;
                    box-shadow: rgb(175 124 81 / 67%) 1px 2px 3px 2px;">
                </p>
            </div>
        </div>
    </div>  

    <!-- Popup hiển thị thông tin user/comp trong battle -->
    <div id="popupInfoMyOrComp">
        <a id="popupInfoName"
            style="font-weight: bold; font-size: 15px;text-align: left;display: flex; flex-direction: column;width: 100%;">Tên:
        </a>
        <a id="popupInfoDesc2"
            style="display: flex; flex-direction: column; gap: 4px;text-align: left; margin-top: -10px;">Mô tả: </a>
        <a id="popupInfoDesc1" style="display: flex; flex-direction: column; gap: 4px;text-align: left;">Mô tả: </a>
    </div>

    <!-- Popup hiển thị message thông báo -->
    <div id="popupMessage" style="
        position: fixed; 
        top: 0; 
        left: 0; 
        width: 100%; 
        height: 100%; 
        background: rgba(0, 0, 0, 0.5); 
        display: none; 
        align-items: center; 
        justify-content: center; 
        opacity: 0; 
        transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        z-index: 9999;
        flex-direction: column;
        ">

        <div
            style=" background: white;
          padding: 12px;
          padding-left: 50px;
          padding-right: 50px;
          border-radius: 10px;
          text-align: center;
          max-width: 420px;
          min-width: 300px;
          box-shadow: 0 4px 10px rgb(0 0 0 / 20%);
          overflow-wrap: break-word;
          -webkit-mask-image: linear-gradient(to right, rgba(0, 0, 0, 0) 0%, black 20%, black 80%, rgba(0, 0, 0, 0) 100%);">

            <p id="popup-message" style="margin: 0; font-weight: bold">Đây là thông báo!</p>
        </div>
        <button onclick="closeMessagePopup()" style="
                margin-top: 10px; 
                padding: 10px 15px; 
                background: #c11e1e; 
                color: white; 
                cursor: pointer; 
                border-radius: 15px;
                min-width: 90px;
                box-shadow: rgb(154 31 31) 1px 2px 1px 2px;
                font-weight: bold;
                border: 2px solid #dfc097;">Đã rõ
        </button>
    </div>

    <!-- Popup hiển thị thông tin item shop -->
    <div id="itemPopupShop" style="display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgb(240, 226, 201);
    padding: 10px;
    border-radius: 10px;
    box-shadow: rgb(0 0 0 / 20%) 0px 4px 6px;
    text-align: center;
    z-index: 1000;
    min-width: 250px;">

        <div style="display: flex; flex-direction: row; gap: 10px">
            <img id="popupImgShop" src=""
                style=" height: 245px; width: 245px; object-fit: cover; border-radius: 10px; border: 4px solid rebeccapurple;">
            <div
                style="display: flex; flex-direction: column; min-width: 300px; align-items: center; justify-content: flex-start;">
                <h3 id="popupNameShop" style="margin: 0;
        margin-top: 2px;
        font-weight: bold;
        color: white;
        background: firebrick;
        border-bottom-right-radius: 10px;
        border-bottom-left-radius: 10px;
        pointer-events: none;
        width: 100%"></h3>
                <p id="popupDescShop" style="background: #fff3dc;
        margin: 0px;
        border: 6px solid #ff000000;
        margin-top: 5px;
        border-radius: 10px;
        font-size: 13px;
        min-height: 179px;
        max-height: 179px;
        max-width: 300px;
        width: 95%;
        overflow: auto;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        text-align: left;
        font-weight: normal;
        gap: 3px;
        box-shadow: rgb(175 124 81 / 67%) 1px 2px 3px 2px;"></p>

                <div style="display: flex; flex-direction: row; gap: 10px; width: 99%; height: 10%; margin-top: 7px;">
                    <p id="popupPriceShop" style=" font-size: 14px; color: gold;
          background: seagreen;
          margin: 0px;
          border-radius: 5px;
          font-weight: bold;
          width: 65%;
          height: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
          text-align: center;"></p>
                    <button id="buyItemShop" style=" padding: 5px 15px; background: firebrick; color: white;
          border: none;
          border-radius: 5px;
          cursor: pointer;
          font-size: 14px;
          font-weight: bold;
          width: 35%;
          height: 100%;">Mua</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Popup hiển thị thông tin item exchange shop -->
    <div id="itemPopupExchange" style="display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgb(240, 226, 201);
    padding: 10px;
    border-radius: 10px;
    box-shadow: rgb(0 0 0 / 20%) 0px 4px 6px;
    text-align: center;
    z-index: 1000;
    min-width: 250px;">

        <div style="display: flex; flex-direction: row; gap: 10px">
            <img id="popupImgExchange" src=""
                style="height: 250px; object-fit: cover; border-radius: 10px; border: 2px solid rebeccapurple;">
            <div
                style="display: flex; flex-direction: column; min-width: 300px; align-items: center; justify-content: flex-start;">
                <h3 id="popupNameExchange" style="margin: 0;
        margin-top: 2px;
        font-weight: bold;
        color: white;
        background: firebrick;
        border-bottom-right-radius: 10px;
        border-bottom-left-radius: 10px;
        pointer-events: none;
        width: 100%"></h3>
                <p id="popupDescExchange" style="background: #fff3dc;
        margin: 0px;
        border: 6px solid #ff000000;
        margin-top: 5px;
        border-radius: 10px;
        font-size: 12px;
        min-height: 179px;
        max-height: 179px;
        max-width: 300px;
        width: 95%;
        overflow: auto;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        text-align: left;
        font-weight: normal;
        gap: 3px;
        box-shadow: rgb(175 124 81 / 67%) 1px 2px 3px 2px;"></p>

                <div style="display: flex; flex-direction: row; gap: 10px; width: 99%; height: 10%; margin-top: 7px;">
                    <p id="popupPriceExchange" style=" font-size: 14px; color: gold;
          background: seagreen;
          margin: 0px;
          border-radius: 5px;
          font-weight: bold;
          width: 50%;
          height: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
          text-align: center;"></p>
                    <button id="buyItemExchange" style=" padding: 5px 15px; background: firebrick; color: white;
          border: none;
          border-radius: 5px;
          cursor: pointer;
          font-size: 14px;
          font-weight: bold;
          width: 50%;
          height: 100%;">Đổi</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Popup cổng thanh toán paymentGateway -->
    <div id="paymentGateway" style="display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgb(240, 226, 201);
    padding: 10px;
    border-radius: 10px;
    box-shadow: rgb(0 0 0 / 20%) 0px 4px 6px;
    text-align: center;
    z-index: 1000;
    min-width: 250px;">

        <div style="display: flex; flex-direction: row; gap: 10px; position: relative;">
            <div onclick="closePaymentGateway()"
                style=" padding: 5px; padding-left: 10px; padding-right: 10px; position: absolute; top: -32px; right: -32px; color: white; border-radius: 100px; background: firebrick; border: 4px solid #f0e2c9; cursor: pointer;">
                x</div>
            <span id="qrCode"
                style="background: url(https://res.cloudinary.com/dxgawkr4g/image/upload/v1731138498/Gate-5Mon-1.png); height: 300px; width: 300px; object-fit: cover; background-size: 100%; background-repeat: no-repeat; background-position: center; border-radius: 10px;"></span>
            <!-- Thông tin chuyển khoản -->
            <div
                style="display: flex; flex-direction: column; min-width: 300px; align-items: center; justify-content: flex-start;">
                <h3 style="margin: 0;
        margin-top: 2px;
        font-weight: bold;
        color: white;
        background: firebrick;
        border-bottom-right-radius: 10px;
        border-bottom-left-radius: 10px;
        pointer-events: none;
        width: 100%">Thông tin thanh toán</h3>
                <div id="descPayment" style="background: #fff3dc;
        margin: 0px;
        border: 6px solid #ff000000;
        margin-top: 5px;
        border-radius: 10px;
        font-size: 13px;
        min-height: 225px;
        max-height: 225px;
        max-width: 400px;
        width: 95%;
        overflow: auto;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        text-align: left;
        box-shadow: rgb(175 124 81 / 67%) 1px 2px 3px 2px;
        font-weight: bold;
        gap: 10px;">
                </div>

                <div
                    style="display: flex; flex-direction: row; gap: 10px; width: 99%; height: 10%; margin-top: 7px; justify-content: center; align-items: center;">
                    <p style=" font-size: 14px; color: gold;
          background: seagreen;
          margin: 0px;
          border-radius: 5px;
          font-weight: bold;
          width: 95%;
          height: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
          text-align: center; gap: 3px;">Giá trị quy đổi: 1000đ = 1 <i class="fa-solid fa-gem"></i></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Nền mờ khi mở popup -->
    <div id="popupOverlay"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 999;">
    </div>
    
    <!--   popup setting main   -->
    <div id="popupSettingMain" style="display: none; justify-content: center; align-items: center; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 997; position: absolute;">
        <div style="
        position: absolute;
        background: #e7c17f;
        border: 5px solid wheat;
        border-radius: 20px;
        width: 480px;
        height: 230px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        z-index: 998;
        animation: fadeIn 1s ease-out;
        padding: 5px;
        gap: 22px;
        box-shadow: rgb(200 155 75) 1px 2px 1px 2px;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        ">

            <button style="position: absolute; margin: 5px; border-radius: 42px; cursor: pointer; 
                font-size: 16px; top: -20px; right: -20px; padding: 5px 10px; border: 2px solid wheat; 
                box-shadow: rgb(188, 119, 45) 0px 2px 1px 1px; background: rgb(240, 115, 115); color: white; 
                font-weight: bold; transform: scale(1);" 
                onmouseover="this.style.background='#ea3e3e'; this.style.transform='scale(1.05)';" 
                onmouseout="this.style.background='#f07373'; this.style.transform='scale(1)';" 
                onclick="openPopupSettingMain()">x</button>

            <div style="background: #f89674;position: absolute;top: -20px;width: 140px;height: 20px;display: flex;color: white;font-size: 15px;font-weight: bold;border-radius: 10px;border: 3px solid #ffd8cd;box-shadow: rgb(199 125 99) 1px 2px 1px 2px;justify-content: center;align-items: center;/* outline: 2px solid; */text-shadow: 1px 2px 1px #835016;">
                TÙY CHỈNH</div>

            <div style="display: flex;flex-direction: row;width: 100%;justify-content: space-around;align-items: center;min-height: 127px;gap: 10px;margin-top: 10px;">
                <!-- Thông tin trong game -->
                <div style="display: flex;flex-direction: column;width: 65%;height: 200px;padding: 5px;border: 3px solid wheat;border-radius: 15px;box-shadow: rgb(200 155 75) 1px 2px 1px 2px;gap: 5px;">
                    <div style="display: flex; flex-direction: column; text-align: justify; font-size: 13px; color: black; gap: 10px; ">
                        <!-- Âm thanh -->
                        <!-- Âm thanh Background -->
                        <div id="musicControlsBoardBG" style="display: flex;flex-direction: column;text-align: justify;">
                             <div id="musicControlsBG" style="
                                  display: flex;
                                  flex-direction: column;
                                  align-items: center;
                                  background: rgba(255, 255, 255, 0.15);
                                  padding: 6px 10px;
                                  border-radius: 12px;
                                  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
                                  justify-content: center;
                                  align-content: center;
                                ">
                                 <span>Âm lượng nhạc nền</span>
                                 <div style="display: flex; flex-direction: row; width: 100%;">
                                      <button id="toggleMusicBG" title="Tắt nhạc" style="
                                        background: none;
                                        border: none;
                                        font-size: 20px;
                                        cursor: pointer;
                                        transition: transform 0.2s ease;
                                      ">🔊</button>
                                      
                                      <input type="range" id="volumeControlBG" min="0" max="1" step="0.01" value="0.2" style="
                                        width: 80%;
                                        cursor: pointer;
                                      ">
                                  </div>
                            </div>
                        </div>

                        <!-- Âm thanh click -->
                        <div id="musicControlsBoardClick" style="display: flex; flex-direction: column; text-align: justify;">
                          <div id="musicControlsClick" style="
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            background: rgba(255, 255, 255, 0.15);
                            padding: 6px 10px;
                            border-radius: 12px;
                            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
                            justify-content: center;
                          ">
                            <span>Âm lượng nút bấm</span>
                            <div style="display: flex; flex-direction: row; width: 100%;">
                                <button id="toggleMusicClick" title="Tắt âm click" style="
                                  background: none;
                                  border: none;
                                  font-size: 20px;
                                  cursor: pointer;
                                  transition: transform 0.2s ease;
                                ">🔊</button>
                            
                                <input type="range" id="volumeControlClick" min="0" max="1" step="0.01" value="0.9" style="
                                  width: 80%;
                                  cursor: pointer;
                                ">
                            </div>
                          </div>
                        </div>
                        
                    </div>
                </div>

                <!-- Các nút thao tác -->
                <div style="display: flex;flex-direction: column;width: 30%;height: 200px;padding: 5px;border: 3px solid wheat;border-radius: 15px;justify-content: flex-start;box-shadow: rgb(200 155 75) 1px 2px 1px 2px;gap: 10px;">
                    <button id="buttonSettingMainMusic" style="font-weight: bold; color: white; background: rgb(248, 150, 116); height: 30px; 
                        border-radius: 15px; border: 2px solid rgb(255, 216, 205); box-shadow: rgb(203, 134, 107) 0px 2px 1px 1px; 
                        text-shadow: rgb(61, 85, 169) 1px 2px 1px; transform: scale(1);" 
                        onmouseover="this.style.background='rgb(235 32 32)'; this.style.transform='scale(1.05)';" 
                        onmouseout="this.style.background='rgb(248 150 116)'; this.style.transform='scale(1)';" 
                        onclick="selectButtonSettingMain('Âm thanh')">Âm thanh
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Popup setting battle-->
    <div id="popupSetting"
        style="display: none; justify-content: center; align-items: center; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 997; position: absolute;">
        <div style="position: absolute;
        background: #e7c17f;
        border: 5px solid wheat;
        border-radius: 20px;
        width: 480px;
        height: 250px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        z-index: 998;
        animation: fadeIn 1s ease-out;
        padding: 15px;
        gap: 22px;
        box-shadow: rgb(200 155 75) 1px 2px 1px 2px;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);">

            <button
                style=" position: absolute;margin: 5px;border-radius: 42px;cursor: pointer;font-size: 16px;top: -20px;right: -20px;padding-right: 10px;padding-left: 10px;padding-top: 5px;padding-bottom: 5px; border: 2px solid wheat; box-shadow: rgb(188 119 45) 0px 2px 1px 1px; background: #f07373; color: white; font-weight: bold;"
                onmouseover="this.style.background='#ea3e3e'; this.style.transform='scale(1.05)';"
                onmouseout="this.style.background='#f07373'; this.style.transform='scale(1)';"
                onclick="closePopupSetting()">x</button>

            <div
                style="background: #f89674;position: absolute;top: -20px;width: 200px;height: 25px;display: flex;color: white;font-size: 16px;font-weight: bold;border-radius: 10px;border: 3px solid #ffd8cd;box-shadow: rgb(199 125 99) 1px 2px 1px 2px;justify-content: center;align-items: center;/* outline: 2px solid; */text-shadow: 1px 2px 1px #835016;">
                TÙY CHỈNH</div>

            <div
                style="display: flex;flex-direction: row;width: 100%; justify-content: space-around; align-items: center; min-height: 165px; gap: 10px; margin-top: 10px;">
                <!-- Thông tin trong game -->
                <div
                    style="display: flex; flex-direction: column; width: 65%;height: 220px;padding: 5px; border: 3px solid wheat;  border-radius: 15px; box-shadow: rgb(200 155 75) 1px 2px 1px 2px; gap: 5px;">
                    <span style="font-size: 15px; font-weight: bold; color: black;">___ Thông tin trận trận đấu
                        ___</span>
                    <div id="descPopupSetting"
                        style="display: flex; flex-direction: column; text-align: justify; font-size: 13px; color: black; gap: 10px; ">

                    </div>
                </div>

                <!-- Các nút thao tác -->
                <div
                    style="display: flex; flex-direction: column; width: 30%;height: 220px;padding: 5px; border: 3px solid wheat;  border-radius: 15px; justify-content: flex-start; box-shadow: rgb(200 155 75) 1px 2px 1px 2px; gap: 10px;">
                    <button
                        style="font-weight: bold;color: white;background: rgb(248 150 116);height: 30px;border-radius: 15px;border: 2px solid rgb(255 216 205);box-shadow: rgb(203 134 107) 0px 2px 1px 1px;text-shadow: rgb(61, 85, 169) 1px 2px 1px;transform: scale(1);"
                        onmouseover="this.style.background='rgb(235 32 32)'; this.style.transform='scale(1.05)';"
                        onmouseout="this.style.background='rgb(248 150 116)'; this.style.transform='scale(1)';"
                        onclick="outGameRank()">Đầu hàng</button>
                    <button
                        style="font-weight: bold;color: white;background: rgb(248 150 116);height: 30px;border-radius: 15px;border: 2px solid rgb(255 216 205);box-shadow: rgb(203 134 107) 0px 2px 1px 1px;text-shadow: rgb(61, 85, 169) 1px 2px 1px;transform: scale(1);"
                        onmouseover="this.style.background='rgb(235 32 32)'; this.style.transform='scale(1.05)';"
                        onmouseout="this.style.background='rgb(248 150 116)'; this.style.transform='scale(1)';"
                        onclick="messageOpen('Sắp ra mắt')">Setting</button>
                    <button
                        style="font-weight: bold;color: white;background: rgb(248 150 116);height: 30px;border-radius: 15px;border: 2px solid rgb(255 216 205);box-shadow: rgb(203 134 107) 0px 2px 1px 1px;text-shadow: rgb(61, 85, 169) 1px 2px 1px;transform: scale(1);"
                        onmouseover="this.style.background='rgb(235 32 32)'; this.style.transform='scale(1.05)';"
                        onmouseout="this.style.background='rgb(248 150 116)'; this.style.transform='scale(1)';"
                        onclick="messageOpen('Sắp ra mắt')">Soon</button>
                </div>

            </div>
        </div>
    </div>

    <!-- Màn hình thông báo chiến thắng/thua cuộc -->
    <div id="resultScreen" class="result-overlay hidden">
        <div class="result-content">
            <h1 id="resultText" class="result-text"></h1>
            <a id="pointResultText" class="result-text" style="font-size: 18px; color: #ffffff;"></a>
            <button id="buttonEndGame" class="result-button" onclick="">Tiếp theo</button>
        </div>
    </div>

    <!-- Màn hình final game -->
    <div id="finalGameScreen" style="display: none;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 997; position: absolute;">
        <div style="
        position: fixed;
        background: #e7c17f;
        border: 5px solid wheat;
        border-radius: 20px;
        width: 770px;
        height: 350px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        z-index: 998;
        animation: fadeIn 1s ease-out;
        padding: 35px;
        gap: 22px;
        box-shadow: rgb(200 155 75) 1px 2px 1px 2px;">
            <div style="background: #de913e;
      position: absolute;
      top: -20px;
      width: 400px;
      height: 30px;
      display: flex;
      color: white;
      font-size: 20px;
      font-weight: bold;
      border-radius: 10px;
      border: 4px solid #f6bb7b;
      box-shadow: rgb(177 112 42) 1px 2px 1px 2px;
      justify-content: center;
      align-items: center;
      outline: 2px solid;
      text-shadow: 1px 2px 1px #835016;
      ">
                HOÀN THÀNH TRẬN ĐẤU
            </div>

            <!-- Vùng thành tích + phần thưởng -->
            <div
                style="display: flex; flex-direction: row; width: 100%; justify-content: space-around; align-items: center; min-height: 165px; gap: 5px;">
                <!-- Thành tích -->
                <div
                    style="display: flex;flex-direction: column;width: 49%;height: 100%;padding: 5px;border: 3px solid wheat;border-radius: 15px;justify-content: center; box-shadow: rgb(200 155 75) 1px 2px 1px 2px;">
                    <span
                        style=" background: #edab63;padding: 5px;width: 120px;height: 15px;font-size: 14px;font-weight: bold;position: absolute; top: 10px; border-radius: 10px; border: 3px solid wheat; box-shadow: rgb(200 155 75) 1px 2px 1px 2px;     color: darkred;">Thành
                        tích</span>

                    <!-- Thắng / Thua -->
                    <div style="display: flex; flex-direction: row; justify-content: center; gap: 5px;">
                        <!-- Thắng -->
                        <div
                            style="position: relative; width: 25%; height: 50px; padding: 10px; border: 3px solid #dbeed2; color: white; background: #8bb978; border-radius: 15px; display: flex; justify-content: center; align-items: center;">
                            <span
                                style="position: absolute;top: -25px; height: 30px; background: #669952; width: 100px; display: flex; justify-content: center; border-radius: 10px; align-items: center; border: 3px solid #dbeed2; font-weight: bold;">Thắng</span>
                            <span id="winFinalGameText"
                                style="font-size: 50px; color: white; font-weight: bold;">6</span>
                        </div>

                        <!-- Thua -->
                        <div
                            style="position: relative; width: 25%; height: 50px; padding: 10px; border: 3px solid #d2d3ee; color: white; background: #8078b9; border-radius: 15px; display: flex; justify-content: center; align-items: center;">
                            <span
                                style="position: absolute;top: -25px; height: 30px; background: #7b69d4; width: 100px; display: flex; justify-content: center; border-radius: 10px; align-items: center; border: 3px solid #d2d3ee; font-weight: bold;">Thua</span>
                            <span id="loseFinalGameText"
                                style="font-size: 50px; color: white; font-weight: bold;">5</span>
                        </div>
                    </div>

                    <div>
                        <span></span>
                    </div>
                </div>

                <!-- Phần thưởng -->
                <div
                    style="display: flex;flex-direction: column;width: 49%;height: 100%;padding: 5px;border: 3px solid wheat;border-radius: 15px; justify-content: center; align-items: center; box-shadow: rgb(200 155 75) 1px 2px 1px 2px;">
                    <span
                        style="background: #edab63;padding: 5px;width: 120px;height: 15px;font-size: 14px;font-weight: bold;position: absolute; top: 10px; border-radius: 10px; border: 3px solid wheat; box-shadow: rgb(200 155 75) 1px 2px 1px 2px; right: 45px; color: darkred;">Phần
                        thưởng</span>
                    <div style="display: flex;flex-direction: column">
                        <div style="display: flex;flex-direction: row; gap: 10px;">
                            <!-- Gold / Vàng -->
                            <div onclick="messageOpen('Đây là vàng dùng để mua vật phẩm trong cửa hàng')"
                                style="display: flex;flex-direction: row; width: 20%; height: 50px; padding: 10px; border: 3px solid wheat; color: white; border-radius: 15px; justify-content: center; align-items: center; gap: 5px; background: #d47a7a;">
                                <i class="fa-solid fa-coins" style="font-size: 20px;"></i>
                                <span id="goldFinalGameText"
                                    style="font-size: 20px; color: white; font-weight: bold;">61</span>
                            </div>
                            <!-- Kim Cương -->
                            <div onclick="messageOpen('Đây là kim cương dùng để mua vật phẩm trong cửa hàng')"
                                style="display: flex;flex-direction: row; width: 20%; height: 50px; padding: 10px; border: 3px solid wheat; color: white; border-radius: 15px; justify-content: center; align-items: center; gap: 5px; background: #d47a7a;">
                                <i class="fa-solid fa-gem" style="font-size: 20px;"></i>
                                <span id="diamondFinalGameText"
                                    style="font-size: 20px; color: white; font-weight: bold;">61</span>
                            </div>
                            <!-- PointRank -->
                            <div onclick="messageOpen('Đây là điểm xếp hạng')"
                                style="display: flex;flex-direction: row; width: 20%; height: 50px; padding: 10px; border: 3px solid wheat; color: white; border-radius: 15px; justify-content: center; align-items: center; gap: 5px; background: #d47a7a;">
                                <i class="fa-solid fa-medal" style="font-size: 20px;"></i>
                                <span id="pointFinalGameText"
                                    style="font-size: 20px; color: white; font-weight: bold;">51</span>
                            </div>
                        </div>
                        <!-- Vật phẩm -->
                        <div id="itemFinalGame" style="display: flex;flex-direction: column; border-radius: 15px;">
                            <!-- nơi thêm div vật phẩm -->
                        </div>

                    </div>
                </div>

            </div>

            <!-- Đội hình chiến đấu-->
            <div
                style="display: flex; flex-direction: column; width: 98%; height: 100%; padding: 5px; border: 3px solid wheat; border-radius: 15px; justify-content: center; align-items: center; position: relative; background: rgb(139 185 120); box-shadow: rgb(200 155 75) 1px 2px 1px 2px;">
                <span
                    style="background: #edab63; padding: 5px; width: 200px; height: 15px; font-size: 14px; font-weight: bold; position: absolute; top: -15px; border-radius: 10px; border: 3px solid wheat; box-shadow: rgb(200 155 75) 1px 2px 1px 2px; color: darkred;">Đội
                    hình chiến đấu</span>
                <div class="skillBarFn skillBarBFn">
                    <div id="skillBarBfn"
                        style="display: flex; flex-direction: row; flex-wrap: nowrap; align-items: center; justify-content: space-between; gap: 10px;">
                        <div id="skill1Bfn" class="slotSkillFn"> </div>
                        <div id="skill2Bfn" class="slotSkillFn"> </div>
                        <div id="skill3Bfn" class="slotSkillFn"> </div>
                        <div id="skill4Bfn" class="slotSkillFn"> </div>
                        <div id="skill5Bfn" class="slotSkillFn"> </div>
                        <div id="skill6Bfn" class="slotSkillFn"> </div>
                        <div id="skill7Bfn" class="slotSkillFn"> </div>
                        <div id="skill8Bfn" class="slotSkillFn"> </div>
                        <a></a>
                        <div id="skill9Bfn" class="slotSkillFn" style="border: solid 0.5px white;"> </div>
                    </div>
                </div>
            </div>
            <button id="buttonFinalGame"
                style="padding: 8px 20px; font-size: 14px; font-weight: bold; background-color: #e7785e; border: 4px solid wheat; color: white; border-radius: 20px; cursor: pointer; transition: transform 0.2s ease; margin-top: -15px; box-shadow: rgb(148 93 33) 1px 2px 1px 2px;"
                onclick="">Hoàn thành</button>
        </div>
    </div>

    <div id="tutorialPopup" style="display: none;
                              position: absolute;
                              background: #fff;
                              color: #000;
                              max-width: 350px;
                              padding: 5px;
                              padding-left: 20px;
                              border-radius: 10px;
                              border: solid 2px black;
                              box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
                              z-index: 1000;">
        <p id="tutorialText"></p>
        <div id="guider" style="position: absolute;
                          margin: 5px;
                          border: none;
                          font-size: 16px;
                          width: 80px;
                          bottom: -40px;
                          left: -70px;
                          height: 80px;
                          background-image: url('https://res.cloudinary.com/dxgawkr4g/image/upload/v1730731024/0005.png');
                          background-size: cover;
                          background-position: center;">
        </div>
        <div id="skipGuide" style="position: absolute;
                          margin: 5px;
                          border: none;
                          padding: 5px;
                          border-radius: 20px;
                          bottom: -34px;
                          left: 10px;
                          background: white;
                          font-weight: bold;
                          font-size: 13px;
                          cursor: pointer;" onclick="skipGuide()">Bỏ qua hướng dẫn
        </div>

    </div>

    <!-- Overlay làm mờ nền -->
    <div class="overlayGuide"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 998;"></div>

    <!-- Vùng highlight -->
    <div class="highlightGuide"
        style="display: none; position: absolute; border: 2px solid #fff900f2; box-shadow: 0 0 10px 30000px rgb(6 6 6 / 45%);z-index: 999;"
        onclick="nextStepGuide()"></div>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-analytics.js";
        import { getDatabase, ref, set, get, onValue } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-database.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
        
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
            apiKey: "AIzaSyBT6LriuMIAVKBhOUJX_3d-oVRwklvptDA",
            authDomain: "mon-33182.firebaseapp.com",
            databaseURL: "https://mon-33182-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "mon-33182",
            storageBucket: "mon-33182.firebasestorage.app",
            messagingSenderId: "1023827948484",
            appId: "1:1023827948484:web:8bdde6dcb4454af42d2a91",
            measurementId: "G-EF4J5XT43E"
        };
        
        // Khởi tạo Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getDatabase(app);
    </script>
    <script type="module" src="script.js"></script>
</body>

</html>
